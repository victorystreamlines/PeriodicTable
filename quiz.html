<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GL Periodic</title>
    <link rel="icon" type="image/png" href="ChemistryLogo.png">
    <link rel="shortcut icon" type="image/png" href="ChemistryLogo.png">
    <link rel="apple-touch-icon" href="ChemistryLogo.png">
    <link rel="stylesheet" href="bootstrap.min.css">
    <style>
        /* Authentication Overlay Styles */
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        
        .auth-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
            text-align: center;
            position: relative;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-title {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .auth-subtitle {
            color: #6c757d;
            margin-bottom: 30px;
        }
        
        .auth-form {
            text-align: left;
        }
        
        .auth-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: border-color 0.3s ease;
            margin-bottom: 20px;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .auth-checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .auth-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            color: #495057;
        }
        
        .auth-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }
        
        .auth-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        .auth-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .auth-error {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 15px;
            display: none;
        }
        
        .auth-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Blur effect for main content when auth is active */
        .content-blurred {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }

        /* Global Styles */
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
        }

        .container-fluid {
            max-width: 1750px;
            margin: 0 auto;
            padding: 0 10px;
        }

        /* Header Styles */
        header h1 {
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
        }

        /* Quiz Controls */
        .quiz-controls {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            text-align: center;
        }

        .score-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2196f3;
            margin-bottom: 15px;
        }

        .show-answers-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 30px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .show-answers-btn:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .show-answers-btn.active {
            background: #4caf50;
        }

        /* Periodic Table Container */
        .periodic-table-container {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            overflow-x: hidden;
            display: flex;
            gap: 8px;
            width: 100%;
            max-width: 1650px;
            margin: 0 auto;
        }

        .table-with-controls {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        .column-reset-buttons {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 6px;
            min-width: 1500px;
            margin: 0 auto;
            margin-bottom: 5px;
        }

        .column-reset-btn {
            background: #4caf50;
            color: white;
            border: none;
            padding: 5px 2px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.7rem;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        .column-reset-btn:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .column-reset-btn:active {
            transform: scale(0.95);
        }

        .row-reset-buttons {
            display: flex;
            flex-direction: column;
            gap: 6px;
            padding-top: 40px; /* Adjust for column buttons */
        }

        .row-reset-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .row-reset-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }

        .row-reset-btn:active {
            transform: scale(0.95);
        }

        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 6px;
            min-width: 1500px;
            margin: 0 auto;
        }

        /* Element Styles */
        .element {
            aspect-ratio: 0.72;
            min-height: 110px;
            border: 2px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
            font-size: 0.8rem;
            font-weight: 600;
            text-align: center;
            padding: 6px 3px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            overflow: hidden;
        }

        .element input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-size: inherit;
            font-weight: inherit;
            color: inherit;
            outline: none;
            padding: 1px;
            margin: 0.5px 0;
            box-sizing: border-box;
            max-width: 100%;
        }

        .element input::placeholder {
            color: rgba(0,0,0,0.4);
            font-size: 0.7rem;
        }

        .element input.correct {
            background-color: rgba(76, 175, 80, 0.2);
            color: #2e7d32;
        }

        .element input.incorrect {
            background-color: rgba(244, 67, 54, 0.2);
            color: #d32f2f;
        }

        /* Override transparent background for state-type container fields when correct/incorrect */
        .element .state-type-container .state.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .state.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .metal-type.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .metal-type.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .conductivity.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .conductivity.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .magnetic-susceptibility.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .magnetic-susceptibility.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .magnetic-permeability.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .magnetic-permeability.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .joule-heating.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .joule-heating.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .state-type-container .charge-storage.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .element .state-type-container .charge-storage.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        /* Lanthanides and Actinides correct/incorrect styling */
        .lanthanides-row .element input.correct, .actinides-row .element input.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element input.incorrect, .actinides-row .element input.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        /* Lanthanides and Actinides state-type correct/incorrect styling */
        .lanthanides-row .element .state-type-container .state.correct, .actinides-row .element .state-type-container .state.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .state.incorrect, .actinides-row .element .state-type-container .state.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .metal-type.correct, .actinides-row .element .state-type-container .metal-type.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .metal-type.incorrect, .actinides-row .element .state-type-container .metal-type.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .conductivity.correct, .actinides-row .element .state-type-container .conductivity.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .conductivity.incorrect, .actinides-row .element .state-type-container .conductivity.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .magnetic-susceptibility.correct, .actinides-row .element .state-type-container .magnetic-susceptibility.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .magnetic-susceptibility.incorrect, .actinides-row .element .state-type-container .magnetic-susceptibility.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .magnetic-permeability.correct, .actinides-row .element .state-type-container .magnetic-permeability.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .magnetic-permeability.incorrect, .actinides-row .element .state-type-container .magnetic-permeability.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .joule-heating.correct, .actinides-row .element .state-type-container .joule-heating.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .joule-heating.incorrect, .actinides-row .element .state-type-container .joule-heating.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .lanthanides-row .element .state-type-container .charge-storage.correct, .actinides-row .element .state-type-container .charge-storage.correct {
            background-color: rgba(76, 175, 80, 0.2) !important;
            color: #2e7d32 !important;
        }

        .lanthanides-row .element .state-type-container .charge-storage.incorrect, .actinides-row .element .state-type-container .charge-storage.incorrect {
            background-color: rgba(244, 67, 54, 0.2) !important;
            color: #d32f2f !important;
        }

        .element .atomic-number {
            font-size: 0.7rem;
            font-weight: 400;
            opacity: 0.8;
            line-height: 1;
            flex: 1;
        }

        .element .symbol {
            font-size: 1.1rem;
            font-weight: bold;
            line-height: 1;
            margin: 1px 0;
        }

        .element .name {
            font-size: 0.6rem;
            font-weight: 400;
            opacity: 0.9;
            line-height: 1;
        }

        .element .atomic-mass {
            font-size: 0.6rem;
            font-weight: 400;
            opacity: 0.8;
            line-height: 1;
        }

        .element .state-type-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            margin: 1px 0;
            gap: 2px;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
            min-height: 22px;
            padding: 3px 2px;
        }

        /* Enhanced hover area for better tooltip accessibility */
        .element .state-type-container input {
            position: relative;
            cursor: help;
            border-radius: 2px;
            transition: background-color 0.2s ease;
        }

        .element .state-type-container input:hover {
            background-color: rgba(255, 255, 255, 0.1) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
        }
        
        .element .state-type-container::-webkit-scrollbar {
            height: 2px;
        }
        
        .element .state-type-container::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .element .state-type-container::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }

        .element .state {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .state-type-separator {
            font-size: 0.7rem;
            opacity: 0.8;
            color: inherit;
            margin: 0 1px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .element .metal-type {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .conductivity {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .magnetic-susceptibility {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .magnetic-permeability {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .joule-heating {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        .element .charge-storage {
            font-size: 0.65rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 12px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 4px 3px !important;
            margin: 1px !important;
            min-height: 18px;
            flex-shrink: 0;
        }

        /* Empty cells */
        .empty {
            background: transparent;
            border: none;
            box-shadow: none;
        }

        /* Element Classification Colors */
        .alkali-metals {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
        }

        .alkaline-earth-metals {
            background: linear-gradient(135deg, #ffa726, #ff9800);
            color: white;
        }

        .transition-metals {
            background: linear-gradient(135deg, #42a5f5, #2196f3);
            color: white;
        }

        .post-transition-metals {
            background: linear-gradient(135deg, #66bb6a, #4caf50);
            color: white;
        }

        .metalloids {
            background: linear-gradient(135deg, #ab47bc, #9c27b0);
            color: white;
        }

        .nonmetals {
            background: linear-gradient(135deg, #26c6da, #00bcd4);
            color: white;
        }

        .halogens {
            background: linear-gradient(135deg, #ffca28, #ffc107);
            color: #333;
        }

        .noble-gases {
            background: linear-gradient(135deg, #8d6e63, #795548);
            color: white;
        }

        .lanthanides {
            background: linear-gradient(135deg, #ec407a, #e91e63);
            color: white;
        }

        .actinides {
            background: linear-gradient(135deg, #5c6bc0, #3f51b5);
            color: white;
        }

        /* Lanthanides and Actinides Section */
        .lanthanides-actinides {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin-top: 20px;
            width: 100%;
            max-width: 1650px;
            margin: 20px auto 0;
            box-sizing: border-box;
        }

        .lanthanides-actinides-content {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .lanthanides-section,
        .actinides-section {
            width: 100%;
        }

        .lanthanides-header,
        .actinides-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .special-row-reset-btn {
            background: linear-gradient(135deg, #ec407a, #e91e63);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .special-row-reset-btn.actinides {
            background: linear-gradient(135deg, #5c6bc0, #3f51b5);
        }

        .special-row-reset-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .special-row-reset-btn:active {
            transform: translateY(0);
        }

        .lanthanides-row, .actinides-row {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 6px;
            width: 100%;
            justify-items: center;
            margin-bottom: 5px;
        }

        /* Updated lanthanides and actinides elements to fit container without overflow */
        .lanthanides-row .element, .actinides-row .element {
            aspect-ratio: 0.75;
            min-height: 100px;
            width: 100%;
            max-width: 85px;
            border: 2px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            padding: 5px 3px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            box-sizing: border-box;
        }

        .lanthanides-row .element input, .actinides-row .element input {
            width: 100%;
            border: none;
            background: transparent;
            text-align: center;
            font-size: inherit;
            font-weight: inherit;
            color: inherit;
            outline: none;
            padding: 1px;
            margin: 0.5px 0;
            box-sizing: border-box;
            max-width: 100%;
        }

        .lanthanides-row .element input::placeholder, .actinides-row .element input::placeholder {
            color: rgba(0,0,0,0.4);
            font-size: 0.65rem;
        }

        .lanthanides-row .element .atomic-number-container, 
        .actinides-row .element .atomic-number-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 2px;
            position: relative;
        }

        .lanthanides-row .element .atomic-number, .actinides-row .element .atomic-number {
            font-size: 0.65rem;
            font-weight: 400;
            opacity: 0.8;
            line-height: 1;
            flex: 1;
        }

        .lanthanides-row .element .symbol, .actinides-row .element .symbol {
            font-size: 1rem;
            font-weight: bold;
            line-height: 1;
            margin: 1px 0;
        }

        .lanthanides-row .element .name, .actinides-row .element .name {
            font-size: 0.55rem;
            font-weight: 400;
            opacity: 0.9;
            line-height: 1;
        }

        .lanthanides-row .element .atomic-mass, .actinides-row .element .atomic-mass {
            font-size: 0.55rem;
            font-weight: 400;
            opacity: 0.8;
            line-height: 1;
        }

        .lanthanides-row .element .state-type-container,
        .actinides-row .element .state-type-container {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            margin: 1px 0;
            gap: 1px;
            overflow-x: auto;
            overflow-y: hidden;
            white-space: nowrap;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
            min-height: 20px;
            padding: 2px 1px;
        }

        .lanthanides-row .element .state-type-container::-webkit-scrollbar,
        .actinides-row .element .state-type-container::-webkit-scrollbar {
            height: 2px;
        }
        
        .lanthanides-row .element .state-type-container::-webkit-scrollbar-track,
        .actinides-row .element .state-type-container::-webkit-scrollbar-track {
            background: transparent;
        }
        
        .lanthanides-row .element .state-type-container::-webkit-scrollbar-thumb,
        .actinides-row .element .state-type-container::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 2px;
        }

        .lanthanides-row .element .state, .actinides-row .element .state {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .state-type-separator, .actinides-row .element .state-type-separator {
            font-size: 0.65rem;
            opacity: 0.8;
            color: inherit;
            margin: 0 0.5px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .lanthanides-row .element .metal-type, .actinides-row .element .metal-type {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .conductivity, .actinides-row .element .conductivity {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .magnetic-susceptibility, .actinides-row .element .magnetic-susceptibility {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .magnetic-permeability, .actinides-row .element .magnetic-permeability {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .joule-heating, .actinides-row .element .joule-heating {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .charge-storage, .actinides-row .element .charge-storage {
            font-size: 0.6rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1.2;
            width: 15% !important;
            min-width: 10px !important;
            border: none !important;
            background: transparent !important;
            text-align: center !important;
            color: inherit !important;
            outline: none !important;
            padding: 3px 2px !important;
            margin: 0.5px !important;
            min-height: 16px;
            flex-shrink: 0;
        }

        .lanthanides-row .element .ai-prompt-btn, 
        .actinides-row .element .ai-prompt-btn {
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-left: 1px;
        }

        .lanthanides-row .element .ai-prompt-btn-arabic, 
        .actinides-row .element .ai-prompt-btn-arabic {
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-right: 1px;
        }

        .lanthanides-row .element .ai-prompt-btn::before, 
        .actinides-row .element .ai-prompt-btn::before {
            content: '';
            font-size: 5px;
        }

        .lanthanides-row .element .ai-prompt-btn-arabic::before, 
        .actinides-row .element .ai-prompt-btn-arabic::before {
            content: '';
            font-size: 5px;
        }

        .series-label {
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
        }

        .lanthanides-label {
            color: #e91e63;
        }

        .actinides-label {
            color: #3f51b5;
        }

        /* Responsive Design */
        @media (max-width: 1700px) {
            .periodic-table-container {
                overflow-x: auto;
                max-width: 100%;
            }
            .lanthanides-actinides {
                max-width: 100%;
            }
        }
        
        @media (max-width: 1200px) {
            .periodic-table {
                min-width: 1200px;
                gap: 4px;
            }
            .column-reset-buttons {
                min-width: 1200px;
                gap: 4px;
            }
            .row-reset-buttons {
                gap: 4px;
            }
            .lanthanides-row, .actinides-row {
                gap: 4px;
                grid-template-columns: repeat(15, 1fr);
            }
            .lanthanides-actinides {
                max-width: 100%;
                padding: 15px;
            }
            .element {
                min-height: 98px;
                font-size: 0.7rem;
            }
            .element .symbol {
                font-size: 1rem;
            }
            .element .state, .element .metal-type, .element .conductivity, .element .magnetic-susceptibility, .element .magnetic-permeability, .element .joule-heating, .element .charge-storage {
                font-size: 0.55rem;
            }
            .lanthanides-row .element, .actinides-row .element {
                min-height: 90px;
                max-width: 75px;
                font-size: 0.7rem;
            }
            .lanthanides-row .element .symbol, .actinides-row .element .symbol {
                font-size: 0.95rem;
            }
            .lanthanides-row .element .state, .actinides-row .element .state,
            .lanthanides-row .element .metal-type, .actinides-row .element .metal-type,
            .lanthanides-row .element .conductivity, .actinides-row .element .conductivity,
            .lanthanides-row .element .magnetic-susceptibility, .actinides-row .element .magnetic-susceptibility,
            .lanthanides-row .element .magnetic-permeability, .actinides-row .element .magnetic-permeability,
            .lanthanides-row .element .joule-heating, .actinides-row .element .joule-heating,
            .lanthanides-row .element .charge-storage, .actinides-row .element .charge-storage {
                font-size: 0.55rem;
            }
            .special-row-reset-btn {
                font-size: 0.8rem;
                padding: 6px 15px;
            }
            .series-label {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .periodic-table {
                min-width: 1000px;
                gap: 3px;
            }
            .column-reset-buttons {
                min-width: 1000px;
                gap: 3px;
            }
            .row-reset-buttons {
                gap: 3px;
            }
            .lanthanides-row, .actinides-row {
                gap: 3px;
                grid-template-columns: repeat(15, 1fr);
            }
            .lanthanides-actinides {
                max-width: 100%;
                padding: 10px;
            }
            .lanthanides-header,
            .actinides-header {
                flex-direction: column;
                gap: 10px;
            }
            .element {
                min-height: 78px;
                font-size: 0.6rem;
            }
            .element .symbol {
                font-size: 0.9rem;
            }
            .element .state, .element .metal-type, .element .conductivity, .element .magnetic-susceptibility, .element .magnetic-permeability, .element .joule-heating, .element .charge-storage {
                font-size: 0.5rem;
            }
            .lanthanides-row .element, .actinides-row .element {
                min-height: 80px;
                max-width: 65px;
                font-size: 0.6rem;
            }
            .lanthanides-row .element .symbol, .actinides-row .element .symbol {
                font-size: 0.85rem;
            }
            .lanthanides-row .element .state, .actinides-row .element .state,
            .lanthanides-row .element .metal-type, .actinides-row .element .metal-type,
            .lanthanides-row .element .conductivity, .actinides-row .element .conductivity,
            .lanthanides-row .element .magnetic-susceptibility, .actinides-row .element .magnetic-susceptibility,
            .lanthanides-row .element .magnetic-permeability, .actinides-row .element .magnetic-permeability,
            .lanthanides-row .element .joule-heating, .actinides-row .element .joule-heating,
            .lanthanides-row .element .charge-storage, .actinides-row .element .charge-storage {
                font-size: 0.5rem;
            }
            
            .auth-container {
                padding: 30px;
                margin: 20px;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }

            .ai-prompt-btn {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .ai-prompt-btn::before {
                font-size: 4px;
            }

            .ai-prompt-btn-arabic {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .ai-prompt-btn-arabic::before {
                font-size: 4px;
            }

            .lanthanides-row .element .ai-prompt-btn, 
            .actinides-row .element .ai-prompt-btn {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .lanthanides-row .element .ai-prompt-btn::before, 
            .actinides-row .element .ai-prompt-btn::before {
                font-size: 4px;
            }

            .lanthanides-row .element .ai-prompt-btn-arabic, 
            .actinides-row .element .ai-prompt-btn-arabic {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .lanthanides-row .element .ai-prompt-btn-arabic::before, 
            .actinides-row .element .ai-prompt-btn-arabic::before {
                font-size: 4px;
            }

            .special-row-reset-btn {
                font-size: 0.75rem;
                padding: 5px 12px;
            }
            .series-label {
                font-size: 1rem;
            }
        }

        /* Additional styles for the duplicate control section */
        .quiz-controls-bottom {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 15px 25px;
            box-shadow: 0 6px 25px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            margin: 30px 0;
            border: 2px solid rgba(255,255,255,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            position: relative;
        }

        .quiz-controls-bottom::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        .quiz-controls-bottom .score-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 8px 15px;
            border-radius: 8px;
            border: 2px solid #2196f3;
            min-width: 200px;
            text-align: center;
        }

        .quiz-controls-bottom .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quiz-controls-bottom .show-answers-btn {
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .quiz-controls-bottom .show-answers-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .quiz-controls-bottom .show-answers-btn.active {
            background: linear-gradient(135deg, #ff9800, #f57c00);
        }

        .quiz-controls-bottom .btn-reset {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .quiz-controls-bottom .btn-reset:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 152, 0, 0.3);
        }

        .quiz-controls-bottom .btn-refresh {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .quiz-controls-bottom .btn-refresh:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(23, 162, 184, 0.3);
        }

        /* AI Prompt Button Styles */
        .atomic-number-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 2px;
            position: relative;
        }

        .lanthanides-row .element .atomic-number-container, 
        .actinides-row .element .atomic-number-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 2px;
            position: relative;
        }

        .ai-prompt-btn {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-left: 2px;
        }

        .ai-prompt-btn-arabic {
            width: 12px;
            height: 12px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-right: 2px;
        }

        .ai-prompt-btn:hover {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }

        .ai-prompt-btn:active {
            transform: scale(0.95);
        }

        .ai-prompt-btn::before {
            content: '';
            font-size: 6px;
        }

        .ai-prompt-btn-arabic:hover {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }

        .ai-prompt-btn-arabic:active {
            transform: scale(0.95);
        }

        .ai-prompt-btn-arabic::before {
            content: '';
            font-size: 6px;
        }

        .lanthanides-row .element .ai-prompt-btn, 
        .actinides-row .element .ai-prompt-btn {
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-left: 2px;
        }

        .lanthanides-row .element .ai-prompt-btn-arabic, 
        .actinides-row .element .ai-prompt-btn-arabic {
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6px;
            color: white;
            transition: all 0.3s ease;
            opacity: 0.8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            flex-shrink: 0;
            margin-right: 2px;
        }

        .lanthanides-row .element .ai-prompt-btn::before, 
        .actinides-row .element .ai-prompt-btn::before {
            content: '';
            font-size: 5px;
        }

        .lanthanides-row .element .ai-prompt-btn-arabic::before, 
        .actinides-row .element .ai-prompt-btn-arabic::before {
            content: '';
            font-size: 5px;
        }

        /* Success notification for copy */
        .copy-success {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4caf50, #45a049);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            max-width: 350px;
            line-height: 1.4;
        }

        .copy-success small {
            display: block;
            font-size: 0.8em;
            font-weight: normal;
            margin-top: 4px;
            opacity: 0.9;
        }

        .copy-success.show {
            transform: translateX(0);
        }

        /* Custom Focus Tooltip Styles */
        .focus-tooltip {
            position: absolute;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 500;
            line-height: 1.3;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 10000;
            max-width: 280px;
            pointer-events: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            border: 2px solid rgba(255,255,255,0.1);
        }

        .focus-tooltip.show {
            opacity: 1;
            transform: translateY(0);
        }

        .focus-tooltip::before {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #2c3e50;
        }

        .focus-tooltip .tooltip-title {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
            display: block;
        }

        .focus-tooltip .tooltip-options {
            color: #ecf0f1;
            font-size: 0.75rem;
        }

        @media (max-width: 768px) {
            .quiz-controls-bottom {
                flex-direction: column;
                text-align: center;
                padding: 20px 15px;
            }
            
            .quiz-controls-bottom .score-display {
                margin-bottom: 15px;
                min-width: auto;
                width: 100%;
            }
            
            .quiz-controls-bottom .control-buttons {
                justify-content: center;
                width: 100%;
            }

            .ai-prompt-btn {
                width: 10px;
                height: 10px;
                font-size: 6px;
            }

            .ai-prompt-btn::before {
                font-size: 5px;
            }

            .ai-prompt-btn-arabic {
                width: 10px;
                height: 10px;
                font-size: 6px;
            }

            .ai-prompt-btn-arabic::before {
                font-size: 5px;
            }

            .lanthanides-row .element .ai-prompt-btn, 
            .actinides-row .element .ai-prompt-btn {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .lanthanides-row .element .ai-prompt-btn::before, 
            .actinides-row .element .ai-prompt-btn::before {
                font-size: 4px;
            }

            .lanthanides-row .element .ai-prompt-btn-arabic, 
            .actinides-row .element .ai-prompt-btn-arabic {
                width: 8px;
                height: 8px;
                font-size: 5px;
            }

            .lanthanides-row .element .ai-prompt-btn-arabic::before, 
            .actinides-row .element .ai-prompt-btn-arabic::before {
                font-size: 4px;
            }
        }
    </style>
</head>
<body>
    <!-- Authentication Overlay -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-container">
            <div class="auth-icon"></div>
            <h2 class="auth-title">Secure Access</h2>
            <p class="auth-subtitle">Enter password to access Basic Quiz</p>
            
            <form class="auth-form" id="authForm">
                <div class="mb-3">
                    <input 
                        type="password" 
                        id="passwordInput" 
                        class="auth-input" 
                        placeholder="Enter password" 
                        required
                        autocomplete="current-password"
                    >
                </div>
                
                <div class="auth-checkbox-group">
                    <label class="auth-checkbox">
                        <input type="checkbox" id="showPassword" checked>
                        <span>Show password</span>
                    </label>
                    
                    <label class="auth-checkbox">
                        <input type="checkbox" id="rememberMe" checked>
                        <span>Remember me</span>
                    </label>
                </div>
                
                <button type="submit" class="auth-btn" id="authBtn">
                    Access Quiz
                </button>
                
                <div class="auth-error" id="authError">
                    Incorrect password. Please try again.
                </div>
            </form>
        </div>
    </div>

    <!-- Main Content (will be blurred until authentication) -->
    <div id="mainContent" class="content-blurred">
    <div class="container-fluid">
        <!-- Back to Home Button -->
        <div class="d-flex justify-content-between align-items-center py-3">
            <a href="index.html" class="btn btn-outline-light">
                <i class="fas fa-arrow-left me-2"></i> Back to Home
            </a>
            <div class="d-flex gap-2">
                <a href="Elements.html" class="btn btn-outline-light">
                     Elements Table
                </a>
                <a href="quizwithdetails.html" class="btn btn-outline-light">
                    Advanced Quiz 
                </a>
            </div>
        </div>
        
        <header class="text-center py-4">
            <h1 class="display-4 fw-bold text-primary">Periodic Table Quiz</h1>
            <p class="lead">Fill in the blanks with the correct element information!</p>
        </header>

        <!-- Quiz Controls -->
        <div class="quiz-controls">
            <div class="score-display" id="scoreDisplay">Score: 0 / 1180 (0%)</div>
            <button class="show-answers-btn" id="showAnswersBtn" onclick="toggleAnswers()">Show Answers</button>
            <button class="btn btn-warning ms-3" onclick="resetQuiz()">Reset Quiz</button>
            <button class="btn btn-info ms-3" onclick="refreshPage()" title="Refresh Page"> Refresh</button>
        </div>

        <!-- Periodic Table -->
        <div class="periodic-table-container">
            <div class="row-reset-buttons">
                <button class="row-reset-btn" onclick="resetRow(1)">Reset Row 1</button>
                <button class="row-reset-btn" onclick="resetRow(2)">Reset Row 2</button>
                <button class="row-reset-btn" onclick="resetRow(3)">Reset Row 3</button>
                <button class="row-reset-btn" onclick="resetRow(4)">Reset Row 4</button>
                <button class="row-reset-btn" onclick="resetRow(5)">Reset Row 5</button>
                <button class="row-reset-btn" onclick="resetRow(6)">Reset Row 6</button>
                <button class="row-reset-btn" onclick="resetRow(7)">Reset Row 7</button>
            </div>
            <div class="table-with-controls">
                <div class="column-reset-buttons">
                    <button class="column-reset-btn" onclick="resetColumn(1)">Reset Col 1</button>
                    <button class="column-reset-btn" onclick="resetColumn(2)">Reset Col 2</button>
                    <button class="column-reset-btn" onclick="resetColumn(3)">Reset Col 3</button>
                    <button class="column-reset-btn" onclick="resetColumn(4)">Reset Col 4</button>
                    <button class="column-reset-btn" onclick="resetColumn(5)">Reset Col 5</button>
                    <button class="column-reset-btn" onclick="resetColumn(6)">Reset Col 6</button>
                    <button class="column-reset-btn" onclick="resetColumn(7)">Reset Col 7</button>
                    <button class="column-reset-btn" onclick="resetColumn(8)">Reset Col 8</button>
                    <button class="column-reset-btn" onclick="resetColumn(9)">Reset Col 9</button>
                    <button class="column-reset-btn" onclick="resetColumn(10)">Reset Col 10</button>
                    <button class="column-reset-btn" onclick="resetColumn(11)">Reset Col 11</button>
                    <button class="column-reset-btn" onclick="resetColumn(12)">Reset Col 12</button>
                    <button class="column-reset-btn" onclick="resetColumn(13)">Reset Col 13</button>
                    <button class="column-reset-btn" onclick="resetColumn(14)">Reset Col 14</button>
                    <button class="column-reset-btn" onclick="resetColumn(15)">Reset Col 15</button>
                    <button class="column-reset-btn" onclick="resetColumn(16)">Reset Col 16</button>
                    <button class="column-reset-btn" onclick="resetColumn(17)">Reset Col 17</button>
                    <button class="column-reset-btn" onclick="resetColumn(18)">Reset Col 18</button>
                </div>
                <div id="periodic-table" class="periodic-table"></div>
            </div>
        </div>

        <!-- Secondary Quiz Controls (between main table and lanthanides/actinides) -->
        <div class="quiz-controls-bottom">
            <div class="score-display" id="scoreDisplayBottom">Score: 0 / 1180 (0%)</div>
            <div class="control-buttons">
                <button class="show-answers-btn" id="showAnswersBtnBottom" onclick="toggleAnswers()">Show Answers</button>
                <button class="btn-reset" onclick="resetQuiz()">Reset Quiz</button>
                <button class="btn-refresh" onclick="refreshPage()" title="Refresh Page"> Refresh</button>
            </div>
        </div>

        <!-- Lanthanides and Actinides -->
        <div class="lanthanides-actinides">
            <div class="lanthanides-actinides-content">
                <!-- Lanthanides Section -->
                <div class="lanthanides-section">
                    <div class="lanthanides-header">
                        <div class="series-label lanthanides-label">Lanthanides</div>
                        <button class="special-row-reset-btn" onclick="resetSpecialRow('lanthanides')">Reset Lanthanides</button>
                    </div>
                    <div class="lanthanides-row" id="lanthanides-row"></div>
                </div>
                
                <!-- Actinides Section -->
                <div class="actinides-section">
                    <div class="actinides-header">
                        <div class="series-label actinides-label">Actinides</div>
                        <button class="special-row-reset-btn actinides" onclick="resetSpecialRow('actinides')">Reset Actinides</button>
                    </div>
                    <div class="actinides-row" id="actinides-row"></div>
                </div>
            </div>
        </div>

        <!-- Duplicate Quiz Controls -->
        <div class="quiz-controls-bottom">
            <div class="score-display" id="scoreDisplayBottom2">Score: 0 / 1180 (0%)</div>
            <div class="control-buttons">
                <button class="show-answers-btn" id="showAnswersBtnBottom2" onclick="toggleAnswers()">Show Answers</button>
                <button class="btn-reset" onclick="resetQuiz()">Reset Quiz</button>
                <button class="btn-refresh" onclick="refreshPage()" title="Refresh Page"> Refresh</button>
            </div>
        </div>
    </div>
    </div> <!-- Close mainContent div -->

    <script src="bootstrap.bundle.min.js"></script>
    
    <!-- Authentication Script -->
    <script>
        // Authentication System
        class AuthenticationManager {
            constructor() {
                this.correctPassword = 'GL_Admin';
                this.storageKey = 'periodicTableAuth';
                this.init();
            }

            init() {
                // Check if user is already authenticated
                if (this.isAuthenticated()) {
                    this.allowAccess();
                } else {
                    this.requireAuthentication();
                }

                // Setup event listeners
                this.setupEventListeners();
            }

            setupEventListeners() {
                const authForm = document.getElementById('authForm');
                const passwordInput = document.getElementById('passwordInput');
                const showPasswordCheckbox = document.getElementById('showPassword');
                const authError = document.getElementById('authError');

                // Form submission
                authForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleAuthentication();
                });

                // Show/hide password toggle
                showPasswordCheckbox.addEventListener('change', (e) => {
                    passwordInput.type = e.target.checked ? 'text' : 'password';
                });

                // Clear error on input
                passwordInput.addEventListener('input', () => {
                    authError.style.display = 'none';
                    passwordInput.style.borderColor = '#e9ecef';
                });

                // Focus password input when overlay is shown
                setTimeout(() => {
                    passwordInput.focus();
                }, 100);

                // Handle Enter key on password input
                passwordInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.handleAuthentication();
                    }
                });
            }

            handleAuthentication() {
                const passwordInput = document.getElementById('passwordInput');
                const rememberMeCheckbox = document.getElementById('rememberMe');
                const authError = document.getElementById('authError');
                const authBtn = document.getElementById('authBtn');
                const enteredPassword = passwordInput.value;

                // Disable button during processing
                authBtn.disabled = true;
                authBtn.textContent = 'Verifying...';

                // Simulate processing time for better UX
                setTimeout(() => {
                    if (enteredPassword === this.correctPassword) {
                        // Successful authentication
                        if (rememberMeCheckbox.checked) {
                            this.saveAuthenticationState();
                        }
                        this.allowAccess();
                    } else {
                        // Failed authentication
                        this.showError();
                        authBtn.disabled = false;
                        authBtn.textContent = 'Access Quiz';
                    }
                }, 500);
            }

            showError() {
                const passwordInput = document.getElementById('passwordInput');
                const authError = document.getElementById('authError');
                
                authError.style.display = 'block';
                passwordInput.style.borderColor = '#dc3545';
                passwordInput.value = '';
                passwordInput.focus();
                
                // Add shake animation
                passwordInput.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    passwordInput.style.animation = '';
                }, 500);
            }

            allowAccess() {
                const authOverlay = document.getElementById('authOverlay');
                const mainContent = document.getElementById('mainContent');
                
                // Fade out overlay
                authOverlay.style.opacity = '0';
                
                setTimeout(() => {
                    authOverlay.style.display = 'none';
                    mainContent.classList.remove('content-blurred');
                    
                    // Focus first interactive element if any
                    const firstFocusable = mainContent.querySelector('a, button, input, select, textarea');
                    if (firstFocusable) {
                        firstFocusable.focus();
                    }
                }, 500);
            }

            requireAuthentication() {
                const authOverlay = document.getElementById('authOverlay');
                const mainContent = document.getElementById('mainContent');
                
                authOverlay.style.display = 'flex';
                authOverlay.style.opacity = '1';
                mainContent.classList.add('content-blurred');
                
                // Focus password input
                setTimeout(() => {
                    document.getElementById('passwordInput').focus();
                }, 100);
            }

            saveAuthenticationState() {
                const rememberExpiry = new Date();
                rememberExpiry.setDate(rememberExpiry.getDate() + 30); // Remember for 30 days
                
                localStorage.setItem(this.storageKey, JSON.stringify({
                    authenticated: true,
                    expiry: rememberExpiry.getTime()
                }));
            }

            isAuthenticated() {
                try {
                    const authData = localStorage.getItem(this.storageKey);
                    if (!authData) return false;
                    
                    const parsed = JSON.parse(authData);
                    const now = new Date().getTime();
                    
                    if (parsed.authenticated && parsed.expiry > now) {
                        return true;
                    } else {
                        // Remove expired authentication
                        localStorage.removeItem(this.storageKey);
                        return false;
                    }
                } catch (error) {
                    localStorage.removeItem(this.storageKey);
                    return false;
                }
            }

            logout() {
                localStorage.removeItem(this.storageKey);
                location.reload();
            }
        }

        // Add shake animation CSS
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);

        // Initialize authentication when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            window.authManager = new AuthenticationManager();
        });

        // Add logout function to global scope for debugging (optional)
        window.logout = () => {
            if (window.authManager) {
                window.authManager.logout();
            }
        };
    </script>
    
    <script>
        // Quiz elements data - All 118 elements of the periodic table
        const quizElements = [
            // Period 1
            { atomicNumber: 1, symbol: "H", name: "Hydrogen", atomicMass: "1.008", classification: "nonmetals", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "D", position: {row: 1, col: 1} },
            { atomicNumber: 2, symbol: "He", name: "Helium", atomicMass: "4.003", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "D", position: {row: 1, col: 18} },
            
            // Period 2
            { atomicNumber: 3, symbol: "Li", name: "Lithium", atomicMass: "6.94", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", magneticSusceptibility: "P", position: {row: 2, col: 1} },
            { atomicNumber: 4, symbol: "Be", name: "Beryllium", atomicMass: "9.012", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", magneticSusceptibility: "D", position: {row: 2, col: 2} },
            { atomicNumber: 5, symbol: "B", name: "Boron", atomicMass: "10.81", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", magneticSusceptibility: "D", position: {row: 2, col: 13} },
            { atomicNumber: 6, symbol: "C", name: "Carbon", atomicMass: "12.01", classification: "nonmetals", state: "S", metalType: "N", conductivity: "S", magneticSusceptibility: "D", position: {row: 2, col: 14} },
            { atomicNumber: 7, symbol: "N", name: "Nitrogen", atomicMass: "14.01", classification: "nonmetals", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "D", position: {row: 2, col: 15} },
            { atomicNumber: 8, symbol: "O", name: "Oxygen", atomicMass: "16.00", classification: "nonmetals", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "P", position: {row: 2, col: 16} },
            { atomicNumber: 9, symbol: "F", name: "Fluorine", atomicMass: "19.00", classification: "halogens", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "D", position: {row: 2, col: 17} },
            { atomicNumber: 10, symbol: "Ne", name: "Neon", atomicMass: "20.18", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", magneticSusceptibility: "D", position: {row: 2, col: 18} },
            
            // Period 3
            { atomicNumber: 11, symbol: "Na", name: "Sodium", atomicMass: "22.99", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 3, col: 1} },
            { atomicNumber: 12, symbol: "Mg", name: "Magnesium", atomicMass: "24.31", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 3, col: 2} },
            { atomicNumber: 13, symbol: "Al", name: "Aluminum", atomicMass: "26.98", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 3, col: 13} },
            { atomicNumber: 14, symbol: "Si", name: "Silicon", atomicMass: "28.09", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", position: {row: 3, col: 14} },
            { atomicNumber: 15, symbol: "P", name: "Phosphorus", atomicMass: "30.97", classification: "nonmetals", state: "S", metalType: "N", conductivity: "N", position: {row: 3, col: 15} },
            { atomicNumber: 16, symbol: "S", name: "Sulfur", atomicMass: "32.07", classification: "nonmetals", state: "S", metalType: "N", conductivity: "N", position: {row: 3, col: 16} },
            { atomicNumber: 17, symbol: "Cl", name: "Chlorine", atomicMass: "35.45", classification: "halogens", state: "G", metalType: "N", conductivity: "N", position: {row: 3, col: 17} },
            { atomicNumber: 18, symbol: "Ar", name: "Argon", atomicMass: "39.95", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", position: {row: 3, col: 18} },
            
            // Period 4
            { atomicNumber: 19, symbol: "K", name: "Potassium", atomicMass: "39.10", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 1} },
            { atomicNumber: 20, symbol: "Ca", name: "Calcium", atomicMass: "40.08", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 2} },
            { atomicNumber: 21, symbol: "Sc", name: "Scandium", atomicMass: "44.96", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 3} },
            { atomicNumber: 22, symbol: "Ti", name: "Titanium", atomicMass: "47.87", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 4} },
            { atomicNumber: 23, symbol: "V", name: "Vanadium", atomicMass: "50.94", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 5} },
            { atomicNumber: 24, symbol: "Cr", name: "Chromium", atomicMass: "52.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 6} },
            { atomicNumber: 25, symbol: "Mn", name: "Manganese", atomicMass: "54.94", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 7} },
            { atomicNumber: 26, symbol: "Fe", name: "Iron", atomicMass: "55.85", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 8} },
            { atomicNumber: 27, symbol: "Co", name: "Cobalt", atomicMass: "58.93", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 9} },
            { atomicNumber: 28, symbol: "Ni", name: "Nickel", atomicMass: "58.69", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 10} },
            { atomicNumber: 29, symbol: "Cu", name: "Copper", atomicMass: "63.55", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 11} },
            { atomicNumber: 30, symbol: "Zn", name: "Zinc", atomicMass: "65.38", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 12} },
            { atomicNumber: 31, symbol: "Ga", name: "Gallium", atomicMass: "69.72", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 4, col: 13} },
            { atomicNumber: 32, symbol: "Ge", name: "Germanium", atomicMass: "72.63", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", position: {row: 4, col: 14} },
            { atomicNumber: 33, symbol: "As", name: "Arsenic", atomicMass: "74.92", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", position: {row: 4, col: 15} },
            { atomicNumber: 34, symbol: "Se", name: "Selenium", atomicMass: "78.97", classification: "nonmetals", state: "S", metalType: "N", conductivity: "S", position: {row: 4, col: 16} },
            { atomicNumber: 35, symbol: "Br", name: "Bromine", atomicMass: "79.90", classification: "halogens", state: "L", metalType: "N", conductivity: "N", position: {row: 4, col: 17} },
            { atomicNumber: 36, symbol: "Kr", name: "Krypton", atomicMass: "83.80", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", position: {row: 4, col: 18} },
            
            // Period 5
            { atomicNumber: 37, symbol: "Rb", name: "Rubidium", atomicMass: "85.47", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 1} },
            { atomicNumber: 38, symbol: "Sr", name: "Strontium", atomicMass: "87.62", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 2} },
            { atomicNumber: 39, symbol: "Y", name: "Yttrium", atomicMass: "88.91", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 3} },
            { atomicNumber: 40, symbol: "Zr", name: "Zirconium", atomicMass: "91.22", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 4} },
            { atomicNumber: 41, symbol: "Nb", name: "Niobium", atomicMass: "92.91", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 5} },
            { atomicNumber: 42, symbol: "Mo", name: "Molybdenum", atomicMass: "95.95", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 6} },
            { atomicNumber: 43, symbol: "Tc", name: "Technetium", atomicMass: "98.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 7} },
            { atomicNumber: 44, symbol: "Ru", name: "Ruthenium", atomicMass: "101.07", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 8} },
            { atomicNumber: 45, symbol: "Rh", name: "Rhodium", atomicMass: "102.91", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 9} },
            { atomicNumber: 46, symbol: "Pd", name: "Palladium", atomicMass: "106.42", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 10} },
            { atomicNumber: 47, symbol: "Ag", name: "Silver", atomicMass: "107.87", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 11} },
            { atomicNumber: 48, symbol: "Cd", name: "Cadmium", atomicMass: "112.41", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 12} },
            { atomicNumber: 49, symbol: "In", name: "Indium", atomicMass: "114.82", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 13} },
            { atomicNumber: 50, symbol: "Sn", name: "Tin", atomicMass: "118.71", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 5, col: 14} },
            { atomicNumber: 51, symbol: "Sb", name: "Antimony", atomicMass: "121.76", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", position: {row: 5, col: 15} },
            { atomicNumber: 52, symbol: "Te", name: "Tellurium", atomicMass: "127.60", classification: "metalloids", state: "S", metalType: "T", conductivity: "S", position: {row: 5, col: 16} },
            { atomicNumber: 53, symbol: "I", name: "Iodine", atomicMass: "126.90", classification: "halogens", state: "S", metalType: "N", conductivity: "N", position: {row: 5, col: 17} },
            { atomicNumber: 54, symbol: "Xe", name: "Xenon", atomicMass: "131.29", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", position: {row: 5, col: 18} },
            
            // Period 6
            { atomicNumber: 55, symbol: "Cs", name: "Cesium", atomicMass: "132.91", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 1} },
            { atomicNumber: 56, symbol: "Ba", name: "Barium", atomicMass: "137.33", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 2} },
            // Lanthanides (57-71) - placed in special section
            { atomicNumber: 57, symbol: "La", name: "Lanthanum", atomicMass: "138.91", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 3} },
            { atomicNumber: 58, symbol: "Ce", name: "Cerium", atomicMass: "140.12", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 4} },
            { atomicNumber: 59, symbol: "Pr", name: "Praseodymium", atomicMass: "140.91", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 5} },
            { atomicNumber: 60, symbol: "Nd", name: "Neodymium", atomicMass: "144.24", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 6} },
            { atomicNumber: 61, symbol: "Pm", name: "Promethium", atomicMass: "145.00", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 7} },
            { atomicNumber: 62, symbol: "Sm", name: "Samarium", atomicMass: "150.36", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 8} },
            { atomicNumber: 63, symbol: "Eu", name: "Europium", atomicMass: "151.96", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 9} },
            { atomicNumber: 64, symbol: "Gd", name: "Gadolinium", atomicMass: "157.25", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 10} },
            { atomicNumber: 65, symbol: "Tb", name: "Terbium", atomicMass: "158.93", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 11} },
            { atomicNumber: 66, symbol: "Dy", name: "Dysprosium", atomicMass: "162.50", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 12} },
            { atomicNumber: 67, symbol: "Ho", name: "Holmium", atomicMass: "164.93", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 13} },
            { atomicNumber: 68, symbol: "Er", name: "Erbium", atomicMass: "167.26", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 14} },
            { atomicNumber: 69, symbol: "Tm", name: "Thulium", atomicMass: "168.93", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 15} },
            { atomicNumber: 70, symbol: "Yb", name: "Ytterbium", atomicMass: "173.05", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 16} },
            { atomicNumber: 71, symbol: "Lu", name: "Lutetium", atomicMass: "174.97", classification: "lanthanides", state: "S", metalType: "M", conductivity: "C", position: {row: 8, col: 17} },
            // Continue Period 6
            { atomicNumber: 72, symbol: "Hf", name: "Hafnium", atomicMass: "178.49", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 4} },
            { atomicNumber: 73, symbol: "Ta", name: "Tantalum", atomicMass: "180.95", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 5} },
            { atomicNumber: 74, symbol: "W", name: "Tungsten", atomicMass: "183.84", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 6} },
            { atomicNumber: 75, symbol: "Re", name: "Rhenium", atomicMass: "186.21", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 7} },
            { atomicNumber: 76, symbol: "Os", name: "Osmium", atomicMass: "190.23", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 8} },
            { atomicNumber: 77, symbol: "Ir", name: "Iridium", atomicMass: "192.22", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 9} },
            { atomicNumber: 78, symbol: "Pt", name: "Platinum", atomicMass: "195.08", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 10} },
            { atomicNumber: 79, symbol: "Au", name: "Gold", atomicMass: "196.97", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 11} },
            { atomicNumber: 80, symbol: "Hg", name: "Mercury", atomicMass: "200.59", classification: "transition-metals", state: "L", metalType: "M", conductivity: "C", position: {row: 6, col: 12} },
            { atomicNumber: 81, symbol: "Tl", name: "Thallium", atomicMass: "204.38", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 13} },
            { atomicNumber: 82, symbol: "Pb", name: "Lead", atomicMass: "207.2", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 14} },
            { atomicNumber: 83, symbol: "Bi", name: "Bismuth", atomicMass: "208.98", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 6, col: 15} },
            { atomicNumber: 84, symbol: "Po", name: "Polonium", atomicMass: "209.00", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "S", position: {row: 6, col: 16} },
            { atomicNumber: 85, symbol: "At", name: "Astatine", atomicMass: "210.00", classification: "halogens", state: "S", metalType: "N", conductivity: "N", position: {row: 6, col: 17} },
            { atomicNumber: 86, symbol: "Rn", name: "Radon", atomicMass: "222.00", classification: "noble-gases", state: "G", metalType: "N", conductivity: "N", position: {row: 6, col: 18} },
            
            // Period 7
            { atomicNumber: 87, symbol: "Fr", name: "Francium", atomicMass: "223.00", classification: "alkali-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 1} },
            { atomicNumber: 88, symbol: "Ra", name: "Radium", atomicMass: "226.00", classification: "alkaline-earth-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 2} },
            // Actinides (89-103) - placed in special section
            { atomicNumber: 89, symbol: "Ac", name: "Actinium", atomicMass: "227.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 3} },
            { atomicNumber: 90, symbol: "Th", name: "Thorium", atomicMass: "232.04", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 4} },
            { atomicNumber: 91, symbol: "Pa", name: "Protactinium", atomicMass: "231.04", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 5} },
            { atomicNumber: 92, symbol: "U", name: "Uranium", atomicMass: "238.03", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 6} },
            { atomicNumber: 93, symbol: "Np", name: "Neptunium", atomicMass: "237.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 7} },
            { atomicNumber: 94, symbol: "Pu", name: "Plutonium", atomicMass: "244.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 8} },
            { atomicNumber: 95, symbol: "Am", name: "Americium", atomicMass: "243.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 9} },
            { atomicNumber: 96, symbol: "Cm", name: "Curium", atomicMass: "247.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 10} },
            { atomicNumber: 97, symbol: "Bk", name: "Berkelium", atomicMass: "247.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 11} },
            { atomicNumber: 98, symbol: "Cf", name: "Californium", atomicMass: "251.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 12} },
            { atomicNumber: 99, symbol: "Es", name: "Einsteinium", atomicMass: "252.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 13} },
            { atomicNumber: 100, symbol: "Fm", name: "Fermium", atomicMass: "257.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 14} },
            { atomicNumber: 101, symbol: "Md", name: "Mendelevium", atomicMass: "258.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 15} },
            { atomicNumber: 102, symbol: "No", name: "Nobelium", atomicMass: "259.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 16} },
            { atomicNumber: 103, symbol: "Lr", name: "Lawrencium", atomicMass: "262.00", classification: "actinides", state: "S", metalType: "M", conductivity: "C", position: {row: 9, col: 17} },
            // Continue Period 7
            { atomicNumber: 104, symbol: "Rf", name: "Rutherfordium", atomicMass: "267.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 4} },
            { atomicNumber: 105, symbol: "Db", name: "Dubnium", atomicMass: "270.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 5} },
            { atomicNumber: 106, symbol: "Sg", name: "Seaborgium", atomicMass: "271.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 6} },
            { atomicNumber: 107, symbol: "Bh", name: "Bohrium", atomicMass: "272.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 7} },
            { atomicNumber: 108, symbol: "Hs", name: "Hassium", atomicMass: "277.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 8} },
            { atomicNumber: 109, symbol: "Mt", name: "Meitnerium", atomicMass: "276.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 9} },
            { atomicNumber: 110, symbol: "Ds", name: "Darmstadtium", atomicMass: "281.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 10} },
            { atomicNumber: 111, symbol: "Rg", name: "Roentgenium", atomicMass: "280.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 11} },
            { atomicNumber: 112, symbol: "Cn", name: "Copernicium", atomicMass: "285.00", classification: "transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 12} },
            { atomicNumber: 113, symbol: "Nh", name: "Nihonium", atomicMass: "284.00", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 13} },
            { atomicNumber: 114, symbol: "Fl", name: "Flerovium", atomicMass: "289.00", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 14} },
            { atomicNumber: 115, symbol: "Mc", name: "Moscovium", atomicMass: "288.00", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 15} },
            { atomicNumber: 116, symbol: "Lv", name: "Livermorium", atomicMass: "293.00", classification: "post-transition-metals", state: "S", metalType: "M", conductivity: "C", position: {row: 7, col: 16} },
            { atomicNumber: 117, symbol: "Ts", name: "Tennessine", atomicMass: "292.00", classification: "halogens", state: "S", metalType: "N", conductivity: "N", position: {row: 7, col: 17} },
            { atomicNumber: 118, symbol: "Og", name: "Oganesson", atomicMass: "294.00", classification: "noble-gases", state: "S", metalType: "N", conductivity: "N", position: {row: 7, col: 18} }
        ];

        // Auto-assign magnetic susceptibility based on element properties
        function assignMagneticSusceptibility(element) {
            // Ferromagnetic elements (F)
            const ferromagnetic = [26, 27, 28]; // Fe, Co, Ni
            
            // Paramagnetic elements (P) - metals and some non-metals with unpaired electrons
            const paramagnetic = [3, 8, 11, 12, 13, 19, 20, 21, 22, 23, 24, 25, 29, 31, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 49, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 81, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113];
            
            if (ferromagnetic.includes(element.atomicNumber)) {
                return "F";
            } else if (paramagnetic.includes(element.atomicNumber)) {
                return "P";
            } else {
                return "D"; // Diamagnetic (default)
            }
        }

        // Auto-assign magnetic permeability based on element properties
        function assignMagneticPermeability(element) {
            // High permeability (H) - Ferromagnetic elements
            const highPermeability = [26, 27, 28]; // Fe, Co, Ni
            
            // Medium permeability (M) - Currently empty (reserved for special cases)
            const mediumPermeability = []; // No elements have medium permeability
            
            // Low permeability (L) - Paramagnetic elements (slightly higher than vacuum)
            const lowPermeability = [3, 8, 11, 12, 13, 19, 20, 21, 22, 23, 24, 25, 31, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 49, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 81, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113]; // Li, O, Na, Mg, Al, K, Ca, Sc, Ti, V, Cr, Mn, Ga, Rb, Sr, Y, Zr, Nb, Mo, Tc, Ru, Rh, Pd, In, Cs, Ba, La-Lu, Hf, Ta, W, Re, Os, Ir, Pt, Tl, Fr, Ra, Ac-Lr
            
            if (highPermeability.includes(element.atomicNumber)) {
                return "H";
            } else if (mediumPermeability.includes(element.atomicNumber)) {
                return "M";
            } else if (lowPermeability.includes(element.atomicNumber)) {
                return "L";
            } else {
                return "N"; // None (diamagnetic: noble gases, many nonmetals, Cu, Zn, Ag, Cd, Au, Hg)
            }
        }

        // Auto-assign joule heating based on element properties
        function assignJouleHeating(element) {
            // High conversion (H) - Excellent conductors that efficiently convert electricity to heat
            const highHeating = [13, 29, 47, 78, 79]; // Al, Cu, Ag, Pt, Au - best electrical conductors
            
            // Medium conversion (M) - Good conductors including most metals
            const mediumHeating = [3, 11, 12, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 30, 31, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 48, 49, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 80, 81, 82, 83, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113];
            
            // Low conversion (L) - Semiconductors with limited heating efficiency
            const lowHeating = [5, 6, 14, 32, 33, 34, 51, 52, 84]; // B, C, Si, Ge, As, Se, Sb, Te, Po - semiconductors
            
            if (highHeating.includes(element.atomicNumber)) {
                return "H";
            } else if (mediumHeating.includes(element.atomicNumber)) {
                return "M";
            } else if (lowHeating.includes(element.atomicNumber)) {
                return "L";
            } else {
                return "N"; // None (insulators, noble gases, non-conductors: H, He, N, O, F, Ne, P, S, Cl, Ar, Br, Kr, I, Xe, At, Rn, Ts, Og)
            }
        }

        // Auto-assign charge storage based on element properties (Physical Energy Storage via Charge Accumulation)
        function assignChargeStorage(element) {
            // High storage (H) - Elements with excellent dielectric properties, form high-k dielectrics
            const highStorage = [22, 40, 56, 72, 73]; // Ti, Zr, Ba, Hf, Ta - form excellent capacitor dielectrics
            
            // Medium storage (M) - Elements with moderate dielectric properties
            const mediumStorage = [4, 12, 13, 20, 21, 23, 24, 25, 38, 39, 41, 42, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71]; // Be, Mg, Al, Ca, Sc, V, Cr, Mn, Sr, Y, Nb, Mo, La-Lu - moderate dielectric materials
            
            // Low storage (L) - Elements with limited charge storage capability  
            const lowStorage = [3, 5, 6, 11, 14, 19, 26, 27, 28, 30, 31, 32, 33, 34, 44, 45, 46, 48, 49, 50, 51, 52, 74, 75, 76, 77, 80, 81, 82, 83, 84, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103]; // Li, B, C, Na, Si, K, Fe, Co, Ni, Zn, Ga, Ge, As, Se, Ru, Rh, Pd, Cd, In, Sn, Sb, Te, W, Re, Os, Ir, Hg, Tl, Pb, Bi, Po, Ac-Lr - limited storage
            
            if (highStorage.includes(element.atomicNumber)) {
                return "H";
            } else if (mediumStorage.includes(element.atomicNumber)) {
                return "M";
            } else if (lowStorage.includes(element.atomicNumber)) {
                return "L";
            } else {
                return "N"; // None (noble gases, most non-metals, highly conductive elements): H, He, N, O, F, Ne, P, S, Cl, Ar, Cu, Br, Kr, Ag, I, Xe, Au, At, Rn, superactinides
            }
        }

        // Add magnetic susceptibility to all elements
        quizElements.forEach(element => {
            if (!element.magneticSusceptibility) {
                element.magneticSusceptibility = assignMagneticSusceptibility(element);
            }
            if (!element.magneticPermeability) {
                element.magneticPermeability = assignMagneticPermeability(element);
            }
            if (!element.jouleHeating) {
                element.jouleHeating = assignJouleHeating(element);
            }
            if (!element.chargeStorage) {
                element.chargeStorage = assignChargeStorage(element);
            }
        });

        // Quiz state
        let quizState = {
            score: 0,
            totalQuestions: 0,
            showingAnswers: false,
            userAnswers: {}
        };

        // Initialize quiz
        class PeriodicTableQuiz {
            constructor() {
                this.loadQuizState();
                this.init();
            }

            init() {
                // Reset totalQuestions to 0 before creating elements to avoid accumulation
                quizState.totalQuestions = 0;
                this.createPeriodicTable();
                this.createLanthanidesActinides();
                this.updateScore();
            }

            createPeriodicTable() {
                const periodicTableElement = document.getElementById('periodic-table');
                const totalCells = 7 * 18;
                
                for (let i = 0; i < totalCells; i++) {
                    const row = Math.floor(i / 18) + 1;
                    const col = (i % 18) + 1;
                    
                    const element = this.findElementByPosition(row, col);
                    const cellElement = this.createElement(element, row, col);
                    periodicTableElement.appendChild(cellElement);
                }
            }

            findElementByPosition(row, col) {
                return quizElements.find(element => 
                    element.position.row === row && element.position.col === col
                );
            }

            createElement(elementData, row, col) {
                const elementDiv = document.createElement('div');
                
                if (!elementData) {
                    elementDiv.className = 'element empty';
                    return elementDiv;
                }

                elementDiv.className = `element ${elementData.classification}`;
                elementDiv.setAttribute('data-atomic-number', elementData.atomicNumber);
                
                const elementId = `element-${elementData.atomicNumber}`;
                
                elementDiv.innerHTML = `
                    <div class="atomic-number-container">
                        <button class="ai-prompt-btn-arabic" tabindex="-1" onclick="handleAIPromptClickArabic(${JSON.stringify(elementData).replace(/"/g, '&quot;')})" title="Generate enhanced electrical engineering AI prompt for ${elementData.name} (Arabic Report)"></button>
                        <div class="atomic-number">${elementData.atomicNumber}</div>
                        <button class="ai-prompt-btn" tabindex="-1" onclick="handleAIPromptClick(${JSON.stringify(elementData).replace(/"/g, '&quot;')})" title="Generate enhanced electrical engineering AI prompt for ${elementData.name} (English Report)"></button>
                    </div>
                    <input type="text" class="symbol" id="${elementId}-symbol" placeholder="Symbol" 
                           data-answer="${elementData.symbol}" data-field="symbol" data-element="${elementData.atomicNumber}">
                    <input type="text" class="name" id="${elementId}-name" placeholder="Name" 
                           data-answer="${elementData.name}" data-field="name" data-element="${elementData.atomicNumber}">
                    <input type="text" class="atomic-mass" id="${elementId}-mass" placeholder="Mass" 
                           data-answer="${elementData.atomicMass}" data-field="mass" data-element="${elementData.atomicNumber}">
                    <div class="state-type-container">
                        <input type="text" class="state" id="${elementId}-state" placeholder="" 
                               data-answer="${elementData.state}" data-field="state" data-element="${elementData.atomicNumber}"
                               title="Physical State: S (Solid) | L (Liquid) | G (Gas)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="metal-type" id="${elementId}-metaltype" placeholder="" 
                               data-answer="${elementData.metalType}" data-field="metaltype" data-element="${elementData.atomicNumber}"
                               title="Element Type: M (Metal) | N (Non-metal) | T (Metalloid)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="conductivity" id="${elementId}-conductivity" placeholder="" 
                               data-answer="${elementData.conductivity}" data-field="conductivity" data-element="${elementData.atomicNumber}"
                               title="Electrical Conductivity: C (Conductor) | S (Semiconductor) | I (Insulator)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="magnetic-susceptibility" id="${elementId}-magnetic" placeholder="" 
                               data-answer="${elementData.magneticSusceptibility}" data-field="magnetic" data-element="${elementData.atomicNumber}"
                               title="Magnetic Susceptibility: F (Ferromagnetic) | P (Paramagnetic) | D (Diamagnetic)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="magnetic-permeability" id="${elementId}-permeability" placeholder="" 
                               data-answer="${elementData.magneticPermeability}" data-field="permeability" data-element="${elementData.atomicNumber}"
                               title="Magnetic Permeability: H (High) | M (Medium) | L (Low) | N (None)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="joule-heating" id="${elementId}-joule" placeholder="" 
                               data-answer="${elementData.jouleHeating}" data-field="joule" data-element="${elementData.atomicNumber}"
                               title="Joule Heating Efficiency: H (High) | M (Medium) | L (Low) | N (None)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="charge-storage" id="${elementId}-charge" placeholder="" 
                               data-answer="${elementData.chargeStorage}" data-field="charge" data-element="${elementData.atomicNumber}"
                               title="Physical Energy Storage via Charge Accumulation (Natural Capacitor): H (High) | M (Medium) | L (Low) | N (None)">
                    </div>
                `;

                // Add event listeners for immediate checking
                const inputs = elementDiv.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('input', (e) => this.checkAnswer(e.target));
                    
                    // Add Enter key navigation
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            this.moveToNextField(e.target);
                        }
                    });
                    
                    // Add focus tooltip functionality for state-type-container inputs
                    const container = input.closest('.state-type-container');
                    if (container) {
                        input.addEventListener('focus', (e) => {
                            // Show tooltip immediately when field gets focus
                            this.showFocusTooltip(e.target);
                            
                            // Also use requestAnimationFrame to ensure tooltip shows even if focus event is delayed
                            requestAnimationFrame(() => {
                                if (document.activeElement === e.target) {
                                    this.showFocusTooltip(e.target);
                                }
                            });
                        });
                        input.addEventListener('blur', (e) => {
                            // Only hide tooltip if we're not just moving to another input in the same container
                            setTimeout(() => {
                                const activeElement = document.activeElement;
                                const isMovingToStateInput = activeElement && activeElement.closest('.state-type-container');
                                
                                // If moving to another state-type input, don't hide - let the new focus event handle it
                                if (!isMovingToStateInput) {
                                    this.hideFocusTooltip();
                                }
                            }, 10);
                        });
                        
                        // Also add as backup for click events
                        input.addEventListener('click', (e) => {
                            setTimeout(() => this.showFocusTooltip(e.target), 10);
                        });
                        
                        // Add keyboard navigation support (Tab key) and keep tooltip visible while typing
                        input.addEventListener('keydown', (e) => {
                            if (e.key === 'Tab') {
                                // Don't interfere with default Tab behavior, just ensure tooltip shows
                                // Try immediately
                                setTimeout(() => {
                                    if (document.activeElement === input) {
                                        this.showFocusTooltip(input);
                                    }
                                }, 1);
                                
                                // Also try with requestAnimationFrame
                                requestAnimationFrame(() => {
                                    if (document.activeElement === input) {
                                        this.showFocusTooltip(input);
                                    }
                                });
                            } else {
                                // For any other key (typing), ensure tooltip stays visible
                                if (this.hideTooltipTimeout) {
                                    clearTimeout(this.hideTooltipTimeout);
                                    this.hideTooltipTimeout = null;
                                }
                                // Refresh tooltip position if needed
                                if (document.activeElement === input && !this.currentTooltip) {
                                    this.showFocusTooltip(input);
                                }
                            }
                        });
                        
                        // Keep tooltip visible while user is actively typing
                        input.addEventListener('input', (e) => {
                            // Cancel any pending hide timeouts since user is actively typing
                            if (this.hideTooltipTimeout) {
                                clearTimeout(this.hideTooltipTimeout);
                                this.hideTooltipTimeout = null;
                            }
                            // Ensure tooltip is visible while typing
                            if (!this.currentTooltip) {
                                this.showFocusTooltip(input);
                            }
                        });
                        
                        // Add a continuous check to ensure focused fields have tooltips
                        input.addEventListener('focusin', (e) => {
                            // This event fires when focus enters the element or its children
                            this.showFocusTooltip(e.target);
                        });
                    }
                    
                    // Load saved answers
                    const savedAnswer = quizState.userAnswers[`${elementData.atomicNumber}-${input.dataset.field}`];
                    if (savedAnswer) {
                        input.value = savedAnswer;
                        this.checkAnswer(input, false);
                    }
                });

                quizState.totalQuestions += 10; // symbol, name, mass, state, metaltype, conductivity, magnetic, permeability, joule, charge

                return elementDiv;
            }

            moveToNextField(currentInput) {
                const currentElement = currentInput.dataset.element;
                const currentField = currentInput.dataset.field;
                
                // Define field order: symbol -> name -> mass -> state -> metaltype -> conductivity -> magnetic -> permeability -> joule -> charge
                const fieldOrder = ['symbol', 'name', 'mass', 'state', 'metaltype', 'conductivity', 'magnetic', 'permeability', 'joule', 'charge'];
                const currentFieldIndex = fieldOrder.indexOf(currentField);
                
                let nextInput = null;
                
                if (currentFieldIndex < fieldOrder.length - 1) {
                    // Move to next field in same element
                    const nextField = fieldOrder[currentFieldIndex + 1];
                    nextInput = document.getElementById(`element-${currentElement}-${nextField}`);
                    
                    // If moving to magnetic, permeability, joule, or charge field, scroll it into view
                    if ((nextField === 'magnetic' || nextField === 'permeability' || nextField === 'joule' || nextField === 'charge') && nextInput) {
                        // Scroll the container to show the field
                        const container = nextInput.closest('.state-type-container');
                        if (container) {
                            nextInput.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'end' });
                        }
                    }
                } else {
                    // Move to first field of next element
                    // Get all input elements in the correct order (main table + lanthanides + actinides)
                    const allInputs = [];
                    
                    // Collect inputs from main periodic table
                    const mainTableElements = document.querySelectorAll('.periodic-table .element input[data-field="symbol"]');
                    mainTableElements.forEach(input => {
                        if (input.dataset.element) {
                            allInputs.push(parseInt(input.dataset.element));
                        }
                    });
                    
                    // Collect inputs from lanthanides and actinides
                    const lanthanideActinideInputs = document.querySelectorAll('.lanthanides-row .element input[data-field="symbol"], .actinides-row .element input[data-field="symbol"]');
                    lanthanideActinideInputs.forEach(input => {
                        if (input.dataset.element) {
                            allInputs.push(parseInt(input.dataset.element));
                        }
                    });
                    
                    // Sort elements by atomic number
                    const sortedElements = [...new Set(allInputs)].sort((a, b) => a - b);
                    
                    // Find current element index
                    const currentElementIndex = sortedElements.findIndex(atomicNumber => atomicNumber == currentElement);
                    
                    if (currentElementIndex !== -1 && currentElementIndex < sortedElements.length - 1) {
                        // Next element exists
                        const nextElementAtomicNumber = sortedElements[currentElementIndex + 1];
                        nextInput = document.getElementById(`element-${nextElementAtomicNumber}-symbol`);
                    } else {
                        // Last element, wrap to first element
                        if (sortedElements.length > 0) {
                            const firstElementAtomicNumber = sortedElements[0];
                            nextInput = document.getElementById(`element-${firstElementAtomicNumber}-symbol`);
                        }
                    }
                    
                    // Fallback: if nextInput is still null, try to find any next available input
                    if (!nextInput) {
                        const allAvailableInputs = document.querySelectorAll('.element input[data-field="symbol"]');
                        const currentInputElement = currentInput.closest('.element');
                        let foundCurrent = false;
                        
                        for (let input of allAvailableInputs) {
                            if (foundCurrent) {
                                nextInput = input;
                                break;
                            }
                            if (input.closest('.element') === currentInputElement) {
                                foundCurrent = true;
                            }
                        }
                        
                        // If still not found, wrap to first
                        if (!nextInput && allAvailableInputs.length > 0) {
                            nextInput = allAvailableInputs[0];
                        }
                    }
                }
                
                // Focus on next input if found and ensure it's an input element (not button)
                if (nextInput && nextInput.tagName === 'INPUT') {
                    nextInput.focus();
                    nextInput.select(); // Select all text for easy replacement
                    
                    // Manually trigger tooltip for state-type-container inputs when navigating with Enter/Tab
                    if (nextInput.closest('.state-type-container')) {
                        // Try to show tooltip immediately
                        this.showFocusTooltip(nextInput);
                        
                        // Also add a small delay as backup to ensure focus is fully established
                        setTimeout(() => {
                            if (document.activeElement === nextInput) {
                                this.showFocusTooltip(nextInput);
                            }
                        }, 5);
                        
                        // Use requestAnimationFrame for immediate visual update
                        requestAnimationFrame(() => {
                            if (document.activeElement === nextInput) {
                                this.showFocusTooltip(nextInput);
                            }
                        });
                    }
                    
                    // Scroll into view if needed
                    nextInput.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'nearest' });
                }
            }

            createLanthanidesActinides() {
                // Get the new containers for lanthanides and actinides
                const lanthanideRowContainer = document.getElementById('lanthanides-row');
                const actinideRowContainer = document.getElementById('actinides-row');
                
                // Clear existing content if any
                if (lanthanideRowContainer) lanthanideRowContainer.innerHTML = '';
                if (actinideRowContainer) actinideRowContainer.innerHTML = '';
                
                // Add lanthanides (elements 57-71)
                if (lanthanideRowContainer) {
                    for (let atomicNumber = 57; atomicNumber <= 71; atomicNumber++) {
                        const element = quizElements.find(el => el.atomicNumber === atomicNumber);
                        if (element) {
                            const elementDiv = this.createLanthanideActinideElement(element);
                            lanthanideRowContainer.appendChild(elementDiv);
                        }
                    }
                }
                
                // Add actinides (elements 89-103)
                if (actinideRowContainer) {
                    for (let atomicNumber = 89; atomicNumber <= 103; atomicNumber++) {
                        const element = quizElements.find(el => el.atomicNumber === atomicNumber);
                        if (element) {
                            const elementDiv = this.createLanthanideActinideElement(element);
                            actinideRowContainer.appendChild(elementDiv);
                        }
                    }
                }
            }

            createLanthanideActinideElement(elementData) {
                const elementDiv = document.createElement('div');
                elementDiv.className = `element ${elementData.classification}`;
                elementDiv.setAttribute('data-atomic-number', elementData.atomicNumber);
                
                const elementId = `element-${elementData.atomicNumber}`;
                
                elementDiv.innerHTML = `
                    <div class="atomic-number-container">
                        <button class="ai-prompt-btn-arabic" tabindex="-1" onclick="handleAIPromptClickArabic(${JSON.stringify(elementData).replace(/"/g, '&quot;')})" title="Generate enhanced electrical engineering AI prompt for ${elementData.name} (Arabic Report)"></button>
                        <div class="atomic-number">${elementData.atomicNumber}</div>
                        <button class="ai-prompt-btn" tabindex="-1" onclick="handleAIPromptClick(${JSON.stringify(elementData).replace(/"/g, '&quot;')})" title="Generate enhanced electrical engineering AI prompt for ${elementData.name} (English Report)"></button>
                    </div>
                    <input type="text" class="symbol" id="${elementId}-symbol" placeholder="Symbol" 
                           data-answer="${elementData.symbol}" data-field="symbol" data-element="${elementData.atomicNumber}">
                    <input type="text" class="name" id="${elementId}-name" placeholder="Name" 
                           data-answer="${elementData.name}" data-field="name" data-element="${elementData.atomicNumber}">
                    <input type="text" class="atomic-mass" id="${elementId}-mass" placeholder="Mass" 
                           data-answer="${elementData.atomicMass}" data-field="mass" data-element="${elementData.atomicNumber}">
                    <div class="state-type-container">
                        <input type="text" class="state" id="${elementId}-state" placeholder="" 
                               data-answer="${elementData.state}" data-field="state" data-element="${elementData.atomicNumber}"
                               title="Physical State: S (Solid) | L (Liquid) | G (Gas)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="metal-type" id="${elementId}-metaltype" placeholder="" 
                               data-answer="${elementData.metalType}" data-field="metaltype" data-element="${elementData.atomicNumber}"
                               title="Element Type: M (Metal) | N (Non-metal) | T (Metalloid)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="conductivity" id="${elementId}-conductivity" placeholder="" 
                               data-answer="${elementData.conductivity}" data-field="conductivity" data-element="${elementData.atomicNumber}"
                               title="Electrical Conductivity: C (Conductor) | S (Semiconductor) | I (Insulator)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="magnetic-susceptibility" id="${elementId}-magnetic" placeholder="" 
                               data-answer="${elementData.magneticSusceptibility}" data-field="magnetic" data-element="${elementData.atomicNumber}"
                               title="Magnetic Susceptibility: F (Ferromagnetic) | P (Paramagnetic) | D (Diamagnetic)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="magnetic-permeability" id="${elementId}-permeability" placeholder="" 
                               data-answer="${elementData.magneticPermeability}" data-field="permeability" data-element="${elementData.atomicNumber}"
                               title="Magnetic Permeability: H (High) | M (Medium) | L (Low) | N (None)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="joule-heating" id="${elementId}-joule" placeholder="" 
                               data-answer="${elementData.jouleHeating}" data-field="joule" data-element="${elementData.atomicNumber}"
                               title="Joule Heating Efficiency: H (High) | M (Medium) | L (Low) | N (None)">
                        <span class="state-type-separator">/</span>
                        <input type="text" class="charge-storage" id="${elementId}-charge" placeholder="" 
                               data-answer="${elementData.chargeStorage}" data-field="charge" data-element="${elementData.atomicNumber}"
                               title="Physical Energy Storage via Charge Accumulation (Natural Capacitor): H (High) | M (Medium) | L (Low) | N (None)">
                    </div>
                `;

                // Add event listeners for immediate checking
                const inputs = elementDiv.querySelectorAll('input');
                inputs.forEach(input => {
                    input.addEventListener('input', (e) => this.checkAnswer(e.target));
                    
                    // Add Enter key navigation
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            this.moveToNextField(e.target);
                        }
                    });
                    
                    // Add focus tooltip functionality for state-type-container inputs
                    const container = input.closest('.state-type-container');
                    if (container) {
                        input.addEventListener('focus', (e) => {
                            // Show tooltip immediately when field gets focus
                            this.showFocusTooltip(e.target);
                            
                            // Also use requestAnimationFrame to ensure tooltip shows even if focus event is delayed
                            requestAnimationFrame(() => {
                                if (document.activeElement === e.target) {
                                    this.showFocusTooltip(e.target);
                                }
                            });
                        });
                        input.addEventListener('blur', (e) => {
                            // Only hide tooltip if we're not just moving to another input in the same container
                            setTimeout(() => {
                                const activeElement = document.activeElement;
                                const isMovingToStateInput = activeElement && activeElement.closest('.state-type-container');
                                
                                // If moving to another state-type input, don't hide - let the new focus event handle it
                                if (!isMovingToStateInput) {
                                    this.hideFocusTooltip();
                                }
                            }, 10);
                        });
                        
                        // Also add as backup for click events
                        input.addEventListener('click', (e) => {
                            setTimeout(() => this.showFocusTooltip(e.target), 10);
                        });
                        
                        // Add keyboard navigation support (Tab key) and keep tooltip visible while typing
                        input.addEventListener('keydown', (e) => {
                            if (e.key === 'Tab') {
                                // Don't interfere with default Tab behavior, just ensure tooltip shows
                                // Try immediately
                                setTimeout(() => {
                                    if (document.activeElement === input) {
                                        this.showFocusTooltip(input);
                                    }
                                }, 1);
                                
                                // Also try with requestAnimationFrame
                                requestAnimationFrame(() => {
                                    if (document.activeElement === input) {
                                        this.showFocusTooltip(input);
                                    }
                                });
                            } else {
                                // For any other key (typing), ensure tooltip stays visible
                                if (this.hideTooltipTimeout) {
                                    clearTimeout(this.hideTooltipTimeout);
                                    this.hideTooltipTimeout = null;
                                }
                                // Refresh tooltip position if needed
                                if (document.activeElement === input && !this.currentTooltip) {
                                    this.showFocusTooltip(input);
                                }
                            }
                        });
                        
                        // Keep tooltip visible while user is actively typing
                        input.addEventListener('input', (e) => {
                            // Cancel any pending hide timeouts since user is actively typing
                            if (this.hideTooltipTimeout) {
                                clearTimeout(this.hideTooltipTimeout);
                                this.hideTooltipTimeout = null;
                            }
                            // Ensure tooltip is visible while typing
                            if (!this.currentTooltip) {
                                this.showFocusTooltip(input);
                            }
                        });
                        
                        // Add a continuous check to ensure focused fields have tooltips
                        input.addEventListener('focusin', (e) => {
                            // This event fires when focus enters the element or its children
                            this.showFocusTooltip(e.target);
                        });
                    }
                    
                    // Load saved answers
                    const savedAnswer = quizState.userAnswers[`${elementData.atomicNumber}-${input.dataset.field}`];
                    if (savedAnswer) {
                        input.value = savedAnswer;
                        this.checkAnswer(input, false);
                    }
                });

                quizState.totalQuestions += 10; // symbol, name, mass, state, metaltype, conductivity, magnetic, permeability, joule, charge

                return elementDiv;
            }

            checkAnswer(input, updateScore = true) {
                const userAnswer = input.value.trim();
                const correctAnswer = input.dataset.answer;
                const elementId = input.dataset.element;
                const field = input.dataset.field;
                
                // Save user answer
                quizState.userAnswers[`${elementId}-${field}`] = userAnswer;
                
                if (!quizState.showingAnswers) {
                    if (userAnswer === '') {
                        input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                    } else if (userAnswer.toLowerCase() === correctAnswer.toLowerCase()) {
                        input.className = input.className.replace(/\s*(correct|incorrect)/g, '') + ' correct';
                        if (updateScore) this.updateScore();
                    } else {
                        input.className = input.className.replace(/\s*(correct|incorrect)/g, '') + ' incorrect';
                    }
                }
                
                this.saveQuizState();
            }

            updateScore() {
                let correctAnswers = 0;
                const inputs = document.querySelectorAll('input[data-answer]');
                
                inputs.forEach(input => {
                    if (input.classList.contains('correct')) {
                        correctAnswers++;
                    }
                });
                
                quizState.score = correctAnswers;
                const percentage = quizState.totalQuestions > 0 ? ((correctAnswers / quizState.totalQuestions) * 100).toFixed(1) : 0;
                document.getElementById('scoreDisplay').textContent = `Score: ${correctAnswers} / ${quizState.totalQuestions} (${percentage}%)`;
                document.getElementById('scoreDisplayBottom').textContent = `Score: ${correctAnswers} / ${quizState.totalQuestions} (${percentage}%)`;
                document.getElementById('scoreDisplayBottom2').textContent = `Score: ${correctAnswers} / ${quizState.totalQuestions} (${percentage}%)`;
            }

            saveQuizState() {
                // Don't save totalQuestions as it should be calculated fresh each time
                const stateToSave = {
                    score: quizState.score,
                    showingAnswers: quizState.showingAnswers,
                    userAnswers: quizState.userAnswers
                };
                localStorage.setItem('periodicTableQuizState', JSON.stringify(stateToSave));
            }

            loadQuizState() {
                const saved = localStorage.getItem('periodicTableQuizState');
                if (saved) {
                    const savedState = JSON.parse(saved);
                    // Only restore these properties, not totalQuestions
                    quizState.score = savedState.score || 0;
                    quizState.showingAnswers = savedState.showingAnswers || false;
                    quizState.userAnswers = savedState.userAnswers || {};
                    // totalQuestions will be calculated fresh during element creation
                }
            }

            showFocusTooltip(input) {
                // Clear any pending hide timeout
                if (this.hideTooltipTimeout) {
                    clearTimeout(this.hideTooltipTimeout);
                    this.hideTooltipTimeout = null;
                }
                
                // Get the field type and create appropriate tooltip content
                const field = input.dataset.field;
                let tooltipContent = this.getTooltipContent(field);
                
                if (!tooltipContent) return;
                
                // Remove any existing tooltip immediately
                this.hideFocusTooltipImmediate();
                
                // Create tooltip element
                const tooltip = document.createElement('div');
                tooltip.className = 'focus-tooltip';
                tooltip.innerHTML = tooltipContent;
                
                // Position tooltip above the input
                document.body.appendChild(tooltip);
                
                // Get input position
                const inputRect = input.getBoundingClientRect();
                const tooltipRect = tooltip.getBoundingClientRect();
                
                // Calculate position (centered above the input)
                const left = inputRect.left + (inputRect.width / 2) - (tooltipRect.width / 2);
                const top = inputRect.top - tooltipRect.height - 10;
                
                // Ensure tooltip stays within viewport
                const finalLeft = Math.max(10, Math.min(left, window.innerWidth - tooltipRect.width - 10));
                const finalTop = Math.max(10, top);
                
                tooltip.style.left = finalLeft + 'px';
                tooltip.style.top = finalTop + 'px';
                
                // Show tooltip with animation
                requestAnimationFrame(() => {
                    tooltip.classList.add('show');
                });
                
                // Store reference for cleanup
                this.currentTooltip = tooltip;
            }

            hideFocusTooltip() {
                // Add a small delay to prevent flickering when moving between fields
                this.hideTooltipTimeout = setTimeout(() => {
                    // Only hide tooltip if focus has moved away from all state-type-container inputs
                    const activeElement = document.activeElement;
                    const isInStateContainer = activeElement && activeElement.closest('.state-type-container');
                    
                    // If user is still in a state-type-container input, don't hide the tooltip
                    if (!isInStateContainer) {
                        this.hideFocusTooltipImmediate();
                    }
                }, 50);
            }

            hideFocusTooltipImmediate() {
                if (this.currentTooltip) {
                    this.currentTooltip.classList.remove('show');
                    setTimeout(() => {
                        if (this.currentTooltip && this.currentTooltip.parentNode) {
                            this.currentTooltip.parentNode.removeChild(this.currentTooltip);
                        }
                        this.currentTooltip = null;
                    }, 300);
                }
            }

            getTooltipContent(field) {
                const tooltipMap = {
                    'state': {
                        title: '儭 Physical State',
                        options: 'S = Solid | L = Liquid | G = Gas'
                    },
                    'metaltype': {
                        title: ' Element Type',
                        options: 'M = Metal | N = Non-metal | T = Metalloid'
                    },
                    'conductivity': {
                        title: ' Electrical Conductivity',
                        options: 'C = Conductor | S = Semiconductor | I = Insulator'
                    },
                    'magnetic': {
                        title: '妓 Magnetic Susceptibility',
                        options: 'F = Ferromagnetic | P = Paramagnetic | D = Diamagnetic'
                    },
                    'permeability': {
                        title: ' Magnetic Permeability',
                        options: 'H = High | M = Medium | L = Low | N = None'
                    },
                    'joule': {
                        title: ' Joule Heating Efficiency',
                        options: 'H = High | M = Medium | L = Low | N = None'
                    },
                    'charge': {
                        title: ' Physical Energy Storage via Charge Accumulation',
                        options: 'H = High (Natural Capacitor) | M = Medium | L = Low | N = None'
                    }
                };
                
                const config = tooltipMap[field];
                if (!config) return null;
                
                return `
                    <span class="tooltip-title">${config.title}</span>
                    <div class="tooltip-options">${config.options}</div>
                `;
            }
        }

        // Global functions
        function toggleAnswers() {
            const btn = document.getElementById('showAnswersBtn');
            const btnBottom = document.getElementById('showAnswersBtnBottom');
            const btnBottom2 = document.getElementById('showAnswersBtnBottom2');
            const inputs = document.querySelectorAll('input[data-answer]');
            
            if (!quizState.showingAnswers) {
                // Show answers
                quizState.showingAnswers = true;
                btn.textContent = 'Hide Answers';
                btn.classList.add('active');
                btnBottom.textContent = 'Hide Answers';
                btnBottom.classList.add('active');
                btnBottom2.textContent = 'Hide Answers';
                btnBottom2.classList.add('active');
                
                inputs.forEach(input => {
                    input.value = input.dataset.answer;
                    input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                    input.style.backgroundColor = 'rgba(255, 255, 0, 0.3)';
                });
            } else {
                // Hide answers and restore user state
                quizState.showingAnswers = false;
                btn.textContent = 'Show Answers';
                btn.classList.remove('active');
                btnBottom.textContent = 'Show Answers';
                btnBottom.classList.remove('active');
                btnBottom2.textContent = 'Show Answers';
                btnBottom2.classList.remove('active');
                
                inputs.forEach(input => {
                    const elementId = input.dataset.element;
                    const field = input.dataset.field;
                    const savedAnswer = quizState.userAnswers[`${elementId}-${field}`] || '';
                    
                    input.value = savedAnswer;
                    input.style.backgroundColor = '';
                    
                    if (savedAnswer) {
                        quiz.checkAnswer(input, false);
                    } else {
                        input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                    }
                });
                
                quiz.updateScore();
            }
        }

        function resetQuiz() {
            localStorage.removeItem('periodicTableQuizState');
            // Reset score, showingAnswers, and userAnswers (totalQuestions will be recalculated automatically)
            quizState = {
                score: 0,
                totalQuestions: quizState.totalQuestions, // Keep current calculated value
                showingAnswers: false,
                userAnswers: {}
            };
            
            const inputs = document.querySelectorAll('input[data-answer]');
            inputs.forEach(input => {
                input.value = '';
                input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                input.style.backgroundColor = '';
            });
            
            document.getElementById('showAnswersBtn').textContent = 'Show Answers';
            document.getElementById('showAnswersBtn').classList.remove('active');
            
            quiz.updateScore();
        }

        function resetRow(rowNumber) {
            // Find all elements in the specified row
            const inputs = document.querySelectorAll(`.element[data-atomic-number] input`);
            inputs.forEach(input => {
                const element = input.closest('.element');
                if (!element) return;
                
                const elementData = quizElements.find(el => el.atomicNumber === parseInt(element.dataset.atomicNumber));
                if (!elementData || elementData.position.row !== rowNumber) return;
                
                // Reset the input
                input.value = '';
                input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                input.style.backgroundColor = '';
                
                // Remove the answer from saved state
                const elementId = input.dataset.element;
                const field = input.dataset.field;
                delete quizState.userAnswers[`${elementId}-${field}`];
            });
            
            // Update score and save state
            quiz.updateScore();
            quiz.saveQuizState();
        }

        function resetColumn(colNumber) {
            // Find all elements in the specified column
            const inputs = document.querySelectorAll(`.element[data-atomic-number] input`);
            inputs.forEach(input => {
                const element = input.closest('.element');
                if (!element) return;
                
                const elementData = quizElements.find(el => el.atomicNumber === parseInt(element.dataset.atomicNumber));
                if (!elementData || elementData.position.col !== colNumber) return;
                
                // Reset the input
                input.value = '';
                input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                input.style.backgroundColor = '';
                
                // Remove the answer from saved state
                const elementId = input.dataset.element;
                const field = input.dataset.field;
                delete quizState.userAnswers[`${elementId}-${field}`];
            });
            
            // Update score and save state
            quiz.updateScore();
            quiz.saveQuizState();
        }

        function resetSpecialRow(type) {
            const startNumber = type === 'lanthanides' ? 57 : 89;
            const endNumber = type === 'lanthanides' ? 71 : 103;
            
            // Find all elements in the specified range
            const inputs = document.querySelectorAll(`.element[data-atomic-number] input`);
            inputs.forEach(input => {
                const element = input.closest('.element');
                if (!element) return;
                
                const atomicNumber = parseInt(element.dataset.atomicNumber);
                if (atomicNumber >= startNumber && atomicNumber <= endNumber) {
                    // Reset the input
                    input.value = '';
                    input.className = input.className.replace(/\s*(correct|incorrect)/g, '');
                    input.style.backgroundColor = '';
                    
                    // Remove the answer from saved state
                    const elementId = input.dataset.element;
                    const field = input.dataset.field;
                    delete quizState.userAnswers[`${elementId}-${field}`];
                }
            });
            
            // Update score and save state
            quiz.updateScore();
            quiz.saveQuizState();
        }

        // Refresh page function
        function refreshPage() {
            location.reload();
        }

        // Initialize quiz when page loads
        let quiz;
        document.addEventListener('DOMContentLoaded', function() {
            quiz = new PeriodicTableQuiz();
            
            // Add a periodic check to ensure focused inputs always have tooltips when they should
            setInterval(() => {
                const activeElement = document.activeElement;
                if (activeElement && 
                    activeElement.tagName === 'INPUT' && 
                    activeElement.closest('.state-type-container') && 
                    !quiz.currentTooltip) {
                    quiz.showFocusTooltip(activeElement);
                }
            }, 100); // Check every 100ms
        });

        // AI Prompt Generation and Copy Functions
        function generateElementPromptArabic(elementData) {
            const prompt = `Please create a comprehensive, professional, and engaging HTML report about the chemical element ${elementData.name} (${elementData.symbol}). The report should be a single HTML page with embedded CSS that is visually appealing, well-structured, and educational.

**IMPORTANT: The entire report must be written in Arabic language with right-to-left (RTL) text direction.**

**Requirements:**
- Single HTML page with internal CSS styling
- Professional, modern, and attractive design
- Clear typography and good color scheme
- Responsive layout that works on different screen sizes
- Use CSS Grid or Flexbox for layout
- Include smooth animations and transitions where appropriate
- Use Arabic text and RTL (right-to-left) layout direction
- Apply dir="rtl" and lang="ar" attributes to HTML elements
- Use appropriate Arabic fonts (like Noto Sans Arabic, Amiri, or similar)

**Report Structure - Include these sections:**

1. **Element Header & Basic Information**
   - Element name, symbol, atomic number: ${elementData.atomicNumber}
   - Atomic mass: ${elementData.atomicMass}
   - Classification: ${elementData.classification}
   - Physical state and basic properties
   - Include an attractive header with the element symbol prominently displayed

2. **Historical Background & Discovery**
   - Discovery date and circumstances
   - Scientists involved in discovery
   - Etymology and name origin
   - Historical significance and early uses
   - Include interesting anecdotes about the discovery

3. **Natural Occurrence & Environmental Presence**
   - Where ${elementData.name} is found in nature
   - Abundance in Earth's crust, oceans, and atmosphere
   - Natural compounds and minerals containing this element
   - Role in biological systems and living organisms
   - Environmental impact and cycling

4. **Daily Life Applications & Uses**
   - Common household items containing ${elementData.name}
   - Food and nutrition connections
   - Medical and health applications
   - Consumer products and technology
   - Personal care and cosmetic uses

5. **Industrial & Manufacturing Applications**
   - Major industrial uses
   - Manufacturing processes involving this element
   - Construction and building materials
   - Electronics and technology applications
   - Transportation industry uses
   - Energy sector applications

6. **Geographic Distribution & Mining**
   - Major producing countries and regions
   - Mining techniques and extraction methods
   - Economic importance and trade
   - Reserve estimates and sustainability
   - Processing and refining locations

7. **Importance & Significance**
   - Critical applications that depend on this element
   - Economic value and market dynamics
   - Strategic importance for various industries
   - Future potential and emerging uses
   - Substitutes and alternatives

8. **Fascinating Facts & Entertainment**
   - Amazing properties and characteristics
   - Record-breaking aspects (hardest, lightest, etc.)
   - Unusual applications and experiments
   - Pop culture references and appearances
   - Surprising connections to everyday life
   - Interactive elements (if JavaScript is beneficial)

9. **Historical Stories & Anecdotes**
   - Famous incidents involving this element
   - Interesting personalities connected to its development
   - Wars, conflicts, or major events related to the element
   - Scientific breakthroughs and discoveries
   - Humorous or surprising historical facts

10. **Professional Chemistry Information**
    - Electronic configuration and structure
    - Chemical properties and reactivity
    - Isotopes and nuclear properties
    - Laboratory handling and safety
    - Advanced applications in research
    - Analytical methods and detection

11. **Future Outlook & Research**
     - Cutting-edge research involving this element
     - Emerging applications and technologies
     - Sustainability and recycling efforts
     - Potential new discoveries
     - Challenges and opportunities

12. **Interactive Electron Distribution & Conduction Band Visualization** 
     ** CRITICAL SECTION FOR ELECTRICAL ENGINEERS - MUST INCLUDE DETAILED DRAWINGS AND VISUALIZATIONS **
     
     **ESSENTIAL DRAWING REQUIREMENTS (DO NOT SKIP):**
     - Create comprehensive interactive JavaScript animations with detailed electron drawings
     - Display ALL orbital shells from innermost to outermost (covalent shells) with precise visual representations
     - Show conduction band and valence shell interactions with clear electron distribution drawings
     - Animate electron movement and transitions between shells with accurate orbital paths
     - Demonstrate how electrons move toward conduction bands for electrical conduction with visual trajectories
     - **MUST INCLUDE DETAILED VISUAL REPRESENTATIONS OF:**
       * Electron orbital paths and energy levels (1s, 2s, 2p, 3s, 3p, 3d, etc.) - DRAW EACH ORBITAL SHAPE
       * Valence shell electron behavior and energy states - SHOW ELECTRON DISTRIBUTIONS
       * Conduction band formation and electron flow mechanisms - ILLUSTRATE ELECTRON MOVEMENT
       * Covalent bonding mechanisms and shared electron pairs - DRAW ORBITAL OVERLAPS
       * Electrical conductivity pathways and electron drift - VISUALIZE CURRENT FLOW
       * Band gap visualization and energy barriers - SHOW ENERGY LEVEL DIAGRAMS
       * Fermi level and electron distribution at different temperatures - GRAPH DISTRIBUTIONS
     
     **TECHNICAL ANIMATION FEATURES (MANDATORY FOR ELECTRICAL ENGINEERS):**
       * Use Canvas or SVG for smooth orbital drawings with high-resolution electron paths
       * Implement particle systems for realistic electron movement visualization
       * Add realistic electron spin and orbital motion with 3D-like orbital shapes
       * Include comprehensive energy level diagrams with color coding and clear drawings
       * Show electron-hole pair generation and recombination with visual animations
       * Animate thermal excitation effects with electron movement between shells
       * Create detailed drawings of electron cloud distributions and probability densities
     
     **INTERACTIVE CONTROLS FOR ELECTRICAL ENGINEERS:**
       * Play/pause/step-through animation controls with frame-by-frame electron movement
       * Temperature slider affecting electron behavior with visual distribution changes
       * Voltage application simulator showing electron drift and current flow
       * Zoom in/out for detailed orbital inspection with electron path visualization
       * Speed control for electron movement visualization with adjustable animation rates
       * Energy level selector and highlighting with detailed shell diagrams
     
     **EDUCATIONAL ENHANCEMENTS WITH DRAWINGS:**
       * Explanatory tooltips with electrical engineering terms and orbital diagrams
       * Real-time calculations of electrical properties with graphical representations
       * Comparison mode with other elements showing orbital differences
       * Measurement units display (eV, Amperes, Volts, etc.) with visual scales
       * Professional electrical engineering annotations with detailed drawings
     
     **DESIGN FROM ELECTRICAL ENGINEER'S PERSPECTIVE (INCLUDE ALL DRAWINGS):**
       * Show how electron movement relates to current flow with detailed electron paths
       * Demonstrate Ohm's law applications with electron drift velocity illustrations
       * Visualize impedance and reactance concepts with electron behavior diagrams
       * Include electrical circuit analogies with electron flow representations
       * Show practical applications in electrical components with orbital interactions
     
     **THIS SECTION IS ABSOLUTELY CRITICAL FOR ELECTRICAL ENGINEERS AND MUST CONTAIN:**
     - Detailed electron orbital drawings showing exact shapes and orientations
     - Accurate electron distribution visualizations in all shells
     - Clear conduction band and valence shell interaction diagrams
     - Interactive animations that demonstrate electron movement principles
     - Professional-quality drawings that electrical engineers can use for reference
     - Visual representations of all electron behavior phenomena mentioned above

13. **Comprehensive Electrical Properties & Engineering Applications**
     - Detailed electrical characteristics and behavior of ${elementData.name}
     - Fundamental electrical properties:
       * Electrical conductivity () and resistivity () with temperature dependencies
       * Conductance and resistance calculations with practical examples
       * Current density and electric field relationships
       * Charge carrier types, concentrations, and mobilities
       * Hall effect measurements and interpretations
     - Dielectric and capacitive properties:
       * Relative permittivity (dielectric constant) and frequency dependence
       * Dielectric loss factor and power factor calculations
       * Breakdown voltage and dielectric strength testing
       * Polarization mechanisms and time constants
       * Capacitance applications and design considerations
     - Semiconductor characteristics (if applicable):
       * Band gap energy and temperature coefficients
       * Intrinsic and extrinsic semiconductor behavior
       * Doping effects and carrier concentration calculations
       * p-n junction formation and electrical characteristics
       * Semiconductor device applications and performance
     - Advanced electrical properties:
       * Thermoelectric properties (Seebeck coefficient, Peltier effect)
       * Piezoelectric and pyroelectric effects
       * Magnetoresistance and Hall effect phenomena
       * Superconducting properties and critical parameters
       * Photoelectric and photovoltaic effects
     - Frequency-dependent behavior:
       * AC electrical response and impedance characteristics
       * Complex permittivity and conductivity
       * Skin effect and proximity effect calculations
       * High-frequency applications and limitations
       * Electromagnetic interference and shielding effectiveness
     - Temperature effects on electrical properties:
       * Temperature coefficients of resistance and conductivity
       * Thermal activation energies and Arrhenius behavior
       * Thermal expansion effects on electrical connections
       * Operating temperature ranges and limitations
       * Thermal management in electrical applications
     - Electrical applications and engineering uses:
       * Electronic components (resistors, capacitors, semiconductors)
       * Power transmission and distribution systems
       * Electrical contacts, connectors, and switching devices
       * Insulation materials and electrical protection
       * Electromagnetic shielding and grounding systems
       * Electrical heating and cooling applications
       * Battery and energy storage technologies
       * Electrical machines and motor applications
     - Electrical safety and reliability:
       * Electrical shock and electrocution hazards
       * Arc flash protection and safety protocols
       * Electrical fire prevention and suppression
       * Insulation coordination and clearance requirements
       * Electrical testing and maintenance procedures
       * Reliability engineering and failure analysis
     - Electrical testing and measurement:
       * Standard test methods and procedures (IEEE, IEC, ASTM)
       * Electrical measurement instruments and techniques
       * Calibration and traceability requirements
       * Statistical analysis of electrical measurements
       * Quality control and acceptance testing
     - Electrical design and engineering calculations:
       * Circuit analysis and design principles
       * Load calculations and power system studies
       * Electrical protection system coordination
       * Grounding and bonding system design
       * Electrical installation standards and codes
       * Energy efficiency and power quality considerations
     - Make this section highly technical and comprehensive for electrical engineers
     - Include electrical engineering formulas, equations, and calculations
     - Reference relevant electrical engineering standards (IEEE, IEC, NEC, etc.)
     - Provide practical design guidelines and best practices
     - Include numerical examples and case studies where appropriate
     - Use proper electrical engineering units and terminology
     - Discuss economic considerations and cost-benefit analysis

**Design Guidelines:**
- Use a modern color palette that reflects the element's properties
- Include attractive icons and visual elements
- Create clear section dividers and headers
- Use cards or boxes for organizing information
- Add hover effects and subtle animations
- Ensure excellent readability and contrast
- Include a table of contents or navigation
- Add a professional footer with element summary
- Apply RTL (right-to-left) layout for Arabic text
- Use appropriate Arabic typography and fonts
- **IMPORTANT:** Style the audio buttons elegantly with consistent design throughout the report
- Audio buttons should be visually appealing and clearly indicate their function
- Use appropriate icons (, 賂, 荔) and hover effects for audio controls
- Position audio buttons prominently at the beginning of each section

**Content Style:**
- Write in an engaging, accessible tone in Arabic
- Balance scientific accuracy with readability
- Include specific examples and concrete details
- Use storytelling techniques to make it interesting
- Add humor where appropriate
- Include surprising facts and connections
- Make it educational but entertaining
- Use professional electrical engineering terminology
- Include practical electrical applications and examples
- Make the electron animation section visually stunning and interactive
- Ensure the electrical properties section is comprehensive for engineering professionals

**Technical Requirements:**
- Valid HTML5 markup with Arabic RTL support
- Modern CSS3 features and styling
- Responsive design for all devices
- Fast loading and optimized performance
- Cross-browser compatibility
- Accessible design following WCAG guidelines
- Advanced JavaScript animations for electron visualization
- Canvas or SVG-based graphics for orbital representations
- Interactive controls for educational demonstrations
- Mathematical calculations for electrical properties
- Professional electrical engineering terminology and units
- Proper Arabic text rendering and RTL layout

**MANDATORY AUDIO FEATURE:**
- Add an elegant audio button at the beginning of EVERY section of the report
- Each audio button should read ONLY that specific section content using British female voice
- Use Web Speech API (speechSynthesis) with voice selection for British female voice
- Audio buttons should be styled elegantly and consistently throughout the report
- Include play/pause functionality and visual feedback during reading
- Each section should have its own independent audio control
- DO NOT create a button that reads the entire report - only individual sections
- Audio buttons should work for both Arabic and English text content
- Implement proper error handling for browsers that don't support speech synthesis
- Add visual indicators showing when audio is playing/paused for each section

Please create a report that would be both informative for chemistry professionals and engaging for students and general readers. Make it visually stunning, highly informative, and genuinely interesting to read!

**Special Focus Areas:**
- **CRITICAL:** The interactive electron distribution visualization (Section 12) should be a centerpiece with professional-grade JavaScript animations and MUST include detailed electron drawings, orbital shapes, and conduction band visualizations
- **ESSENTIAL:** All electron drawings must show covalent orbits, conduction shells, and electron distribution patterns - these are absolutely vital for electrical engineers
- The electrical properties section (Section 13) should serve as a comprehensive reference for electrical engineers and students
- Both sections should demonstrate practical applications in electrical engineering and technology
- Include real-world examples and case studies relevant to electrical engineering practice
- Make sure the content is suitable for both educational and professional engineering environments
- **REMINDER:** Do not forget to include the electron drawings and orbital visualizations - they are extremely important for electrical engineers to understand electron behavior and conduction mechanisms
- **IMPORTANT:** All content must be in Arabic with proper RTL layout and Arabic typography
- **VERY IMPORTANT:** Don't forget to add the report to the homepage menu array and make sure that it appears in the home menu item list-Also add a back home button for every report. 
- **MANDATORY:** Every section must have an elegant audio button with British female voice reading capability - do not skip this feature`;

            return prompt;
        }

        function generateElementPrompt(elementData) {
            const prompt = `Please create a comprehensive, professional, and engaging HTML report about the chemical element ${elementData.name} (${elementData.symbol}). The report should be a single HTML page with embedded CSS that is visually appealing, well-structured, and educational.

**IMPORTANT: The entire report must be written in English language.**

**Requirements:**
- Single HTML page with internal CSS styling
- Professional, modern, and attractive design
- Clear typography and good color scheme
- Responsive layout that works on different screen sizes
- Use CSS Grid or Flexbox for layout
- Include smooth animations and transitions where appropriate

**Report Structure - Include these sections:**

1. **Element Header & Basic Information**
   - Element name, symbol, atomic number: ${elementData.atomicNumber}
   - Atomic mass: ${elementData.atomicMass}
   - Classification: ${elementData.classification}
   - Physical state and basic properties
   - Include an attractive header with the element symbol prominently displayed

2. **Historical Background & Discovery**
   - Discovery date and circumstances
   - Scientists involved in discovery
   - Etymology and name origin
   - Historical significance and early uses
   - Include interesting anecdotes about the discovery

3. **Natural Occurrence & Environmental Presence**
   - Where ${elementData.name} is found in nature
   - Abundance in Earth's crust, oceans, and atmosphere
   - Natural compounds and minerals containing this element
   - Role in biological systems and living organisms
   - Environmental impact and cycling

4. **Daily Life Applications & Uses**
   - Common household items containing ${elementData.name}
   - Food and nutrition connections
   - Medical and health applications
   - Consumer products and technology
   - Personal care and cosmetic uses

5. **Industrial & Manufacturing Applications**
   - Major industrial uses
   - Manufacturing processes involving this element
   - Construction and building materials
   - Electronics and technology applications
   - Transportation industry uses
   - Energy sector applications

6. **Geographic Distribution & Mining**
   - Major producing countries and regions
   - Mining techniques and extraction methods
   - Economic importance and trade
   - Reserve estimates and sustainability
   - Processing and refining locations

7. **Importance & Significance**
   - Critical applications that depend on this element
   - Economic value and market dynamics
   - Strategic importance for various industries
   - Future potential and emerging uses
   - Substitutes and alternatives

8. **Fascinating Facts & Entertainment**
   - Amazing properties and characteristics
   - Record-breaking aspects (hardest, lightest, etc.)
   - Unusual applications and experiments
   - Pop culture references and appearances
   - Surprising connections to everyday life
   - Interactive elements (if JavaScript is beneficial)

9. **Historical Stories & Anecdotes**
   - Famous incidents involving this element
   - Interesting personalities connected to its development
   - Wars, conflicts, or major events related to the element
   - Scientific breakthroughs and discoveries
   - Humorous or surprising historical facts

10. **Professional Chemistry Information**
    - Electronic configuration and structure
    - Chemical properties and reactivity
    - Isotopes and nuclear properties
    - Laboratory handling and safety
    - Advanced applications in research
    - Analytical methods and detection

11. **Future Outlook & Research**
     - Cutting-edge research involving this element
     - Emerging applications and technologies
     - Sustainability and recycling efforts
     - Potential new discoveries
     - Challenges and opportunities

12. **Interactive Electron Distribution & Conduction Band Visualization** 
     ** CRITICAL SECTION FOR ELECTRICAL ENGINEERS - MUST INCLUDE DETAILED DRAWINGS AND VISUALIZATIONS **
     
     **ESSENTIAL DRAWING REQUIREMENTS (DO NOT SKIP):**
     - Create comprehensive interactive JavaScript animations with detailed electron drawings
     - Display ALL orbital shells from innermost to outermost (covalent shells) with precise visual representations
     - Show conduction band and valence shell interactions with clear electron distribution drawings
     - Animate electron movement and transitions between shells with accurate orbital paths
     - Demonstrate how electrons move toward conduction bands for electrical conduction with visual trajectories
     - **MUST INCLUDE DETAILED VISUAL REPRESENTATIONS OF:**
       * Electron orbital paths and energy levels (1s, 2s, 2p, 3s, 3p, 3d, etc.) - DRAW EACH ORBITAL SHAPE
       * Valence shell electron behavior and energy states - SHOW ELECTRON DISTRIBUTIONS
       * Conduction band formation and electron flow mechanisms - ILLUSTRATE ELECTRON MOVEMENT
       * Covalent bonding mechanisms and shared electron pairs - DRAW ORBITAL OVERLAPS
       * Electrical conductivity pathways and electron drift - VISUALIZE CURRENT FLOW
       * Band gap visualization and energy barriers - SHOW ENERGY LEVEL DIAGRAMS
       * Fermi level and electron distribution at different temperatures - GRAPH DISTRIBUTIONS
     
     **TECHNICAL ANIMATION FEATURES (MANDATORY FOR ELECTRICAL ENGINEERS):**
       * Use Canvas or SVG for smooth orbital drawings with high-resolution electron paths
       * Implement particle systems for realistic electron movement visualization
       * Add realistic electron spin and orbital motion with 3D-like orbital shapes
       * Include comprehensive energy level diagrams with color coding and clear drawings
       * Show electron-hole pair generation and recombination with visual animations
       * Animate thermal excitation effects with electron movement between shells
       * Create detailed drawings of electron cloud distributions and probability densities
     
     **INTERACTIVE CONTROLS FOR ELECTRICAL ENGINEERS:**
       * Play/pause/step-through animation controls with frame-by-frame electron movement
       * Temperature slider affecting electron behavior with visual distribution changes
       * Voltage application simulator showing electron drift and current flow
       * Zoom in/out for detailed orbital inspection with electron path visualization
       * Speed control for electron movement visualization with adjustable animation rates
       * Energy level selector and highlighting with detailed shell diagrams
     
     **EDUCATIONAL ENHANCEMENTS WITH DRAWINGS:**
       * Explanatory tooltips with electrical engineering terms and orbital diagrams
       * Real-time calculations of electrical properties with graphical representations
       * Comparison mode with other elements showing orbital differences
       * Measurement units display (eV, Amperes, Volts, etc.) with visual scales
       * Professional electrical engineering annotations with detailed drawings
     
     **DESIGN FROM ELECTRICAL ENGINEER'S PERSPECTIVE (INCLUDE ALL DRAWINGS):**
       * Show how electron movement relates to current flow with detailed electron paths
       * Demonstrate Ohm's law applications with electron drift velocity illustrations
       * Visualize impedance and reactance concepts with electron behavior diagrams
       * Include electrical circuit analogies with electron flow representations
       * Show practical applications in electrical components with orbital interactions
     
     **THIS SECTION IS ABSOLUTELY CRITICAL FOR ELECTRICAL ENGINEERS AND MUST CONTAIN:**
     - Detailed electron orbital drawings showing exact shapes and orientations
     - Accurate electron distribution visualizations in all shells
     - Clear conduction band and valence shell interaction diagrams
     - Interactive animations that demonstrate electron movement principles
     - Professional-quality drawings that electrical engineers can use for reference
     - Visual representations of all electron behavior phenomena mentioned above

13. **Comprehensive Electrical Properties & Engineering Applications**
     - Detailed electrical characteristics and behavior of ${elementData.name}
     - Fundamental electrical properties:
       * Electrical conductivity () and resistivity () with temperature dependencies
       * Conductance and resistance calculations with practical examples
       * Current density and electric field relationships
       * Charge carrier types, concentrations, and mobilities
       * Hall effect measurements and interpretations
     - Dielectric and capacitive properties:
       * Relative permittivity (dielectric constant) and frequency dependence
       * Dielectric loss factor and power factor calculations
       * Breakdown voltage and dielectric strength testing
       * Polarization mechanisms and time constants
       * Capacitance applications and design considerations
     - Semiconductor characteristics (if applicable):
       * Band gap energy and temperature coefficients
       * Intrinsic and extrinsic semiconductor behavior
       * Doping effects and carrier concentration calculations
       * p-n junction formation and electrical characteristics
       * Semiconductor device applications and performance
     - Advanced electrical properties:
       * Thermoelectric properties (Seebeck coefficient, Peltier effect)
       * Piezoelectric and pyroelectric effects
       * Magnetoresistance and Hall effect phenomena
       * Superconducting properties and critical parameters
       * Photoelectric and photovoltaic effects
     - Frequency-dependent behavior:
       * AC electrical response and impedance characteristics
       * Complex permittivity and conductivity
       * Skin effect and proximity effect calculations
       * High-frequency applications and limitations
       * Electromagnetic interference and shielding effectiveness
     - Temperature effects on electrical properties:
       * Temperature coefficients of resistance and conductivity
       * Thermal activation energies and Arrhenius behavior
       * Thermal expansion effects on electrical connections
       * Operating temperature ranges and limitations
       * Thermal management in electrical applications
     - Electrical applications and engineering uses:
       * Electronic components (resistors, capacitors, semiconductors)
       * Power transmission and distribution systems
       * Electrical contacts, connectors, and switching devices
       * Insulation materials and electrical protection
       * Electromagnetic shielding and grounding systems
       * Electrical heating and cooling applications
       * Battery and energy storage technologies
       * Electrical machines and motor applications
     - Electrical safety and reliability:
       * Electrical shock and electrocution hazards
       * Arc flash protection and safety protocols
       * Electrical fire prevention and suppression
       * Insulation coordination and clearance requirements
       * Electrical testing and maintenance procedures
       * Reliability engineering and failure analysis
     - Electrical testing and measurement:
       * Standard test methods and procedures (IEEE, IEC, ASTM)
       * Electrical measurement instruments and techniques
       * Calibration and traceability requirements
       * Statistical analysis of electrical measurements
       * Quality control and acceptance testing
     - Electrical design and engineering calculations:
       * Circuit analysis and design principles
       * Load calculations and power system studies
       * Electrical protection system coordination
       * Grounding and bonding system design
       * Electrical installation standards and codes
       * Energy efficiency and power quality considerations
     - Make this section highly technical and comprehensive for electrical engineers
     - Include electrical engineering formulas, equations, and calculations
     - Reference relevant electrical engineering standards (IEEE, IEC, NEC, etc.)
     - Provide practical design guidelines and best practices
     - Include numerical examples and case studies where appropriate
     - Use proper electrical engineering units and terminology
     - Discuss economic considerations and cost-benefit analysis

**Design Guidelines:**
- Use a modern color palette that reflects the element's properties
- Include attractive icons and visual elements
- Create clear section dividers and headers
- Use cards or boxes for organizing information
- Add hover effects and subtle animations
- Ensure excellent readability and contrast
- Include a table of contents or navigation
- Add a professional footer with element summary
- **IMPORTANT:** Style the audio buttons elegantly with consistent design throughout the report
- Audio buttons should be visually appealing and clearly indicate their function
- Use appropriate icons (, 賂, 荔) and hover effects for audio controls
- Position audio buttons prominently at the beginning of each section

**Content Style:**
- Write in an engaging, accessible tone
- Balance scientific accuracy with readability
- Include specific examples and concrete details
- Use storytelling techniques to make it interesting
- Add humor where appropriate
- Include surprising facts and connections
- Make it educational but entertaining
- Use professional electrical engineering terminology
- Include practical electrical applications and examples
- Make the electron animation section visually stunning and interactive
- Ensure the electrical properties section is comprehensive for engineering professionals

**Technical Requirements:**
- Valid HTML5 markup
- Modern CSS3 features and styling
- Responsive design for all devices
- Fast loading and optimized performance
- Cross-browser compatibility
- Accessible design following WCAG guidelines
- Advanced JavaScript animations for electron visualization
- Canvas or SVG-based graphics for orbital representations
- Interactive controls for educational demonstrations
- Mathematical calculations for electrical properties
- Professional electrical engineering terminology and units

**MANDATORY AUDIO FEATURE:**
- Add an elegant audio button at the beginning of EVERY section of the report
- Each audio button should read ONLY that specific section content using British female voice
- Use Web Speech API (speechSynthesis) with voice selection for British female voice
- Audio buttons should be styled elegantly and consistently throughout the report
- Include play/pause functionality and visual feedback during reading
- Each section should have its own independent audio control
- DO NOT create a button that reads the entire report - only individual sections
- Audio buttons should work for both Arabic and English text content
- Implement proper error handling for browsers that don't support speech synthesis
- Add visual indicators showing when audio is playing/paused for each section

Please create a report that would be both informative for chemistry professionals and engaging for students and general readers. Make it visually stunning, highly informative, and genuinely interesting to read!

**Special Focus Areas:**
- **CRITICAL:** The interactive electron distribution visualization (Section 12) should be a centerpiece with professional-grade JavaScript animations and MUST include detailed electron drawings, orbital shapes, and conduction band visualizations
- **ESSENTIAL:** All electron drawings must show covalent orbits, conduction shells, and electron distribution patterns - these are absolutely vital for electrical engineers
- The electrical properties section (Section 13) should serve as a comprehensive reference for electrical engineers and students
- Both sections should demonstrate practical applications in electrical engineering and technology
- Include real-world examples and case studies relevant to electrical engineering practice
- Make sure the content is suitable for both educational and professional engineering environments
- **REMINDER:** Do not forget to include the electron drawings and orbital visualizations - they are extremely important for electrical engineers to understand electron behavior and conduction mechanisms
- **VERY IMPORTANT:** Don't forget to add the report to the homepage menu array and make sure that it appears in the home menu item list. add a back home button for the report.
- **VERY VERY IMPORTANT:Yet extremely important :** Make sure and check before you finish that the page is added into the home page catalog.Check it yourself before the user checks. Because every time you forget.   
- **VERY VERY VERY CRAZELY IMPORTANT--  IMPORTANT:Yet extremely important :** Make sure and check before you finish that the page is added into the home page catalog.Check it yourself before the user checks. Because every time you forget.Also check it before you render it. Check it yourself. Make sure it's showing and appearing in the catalog homepage item list menu.    
- **MANDATORY:** Every section must have an elegant audio button with British female voice reading capability - do not skip this feature`;

            return prompt;
        }

        function copyToClipboard(text, successMessage) {
            navigator.clipboard.writeText(text).then(function() {
                showCopySuccess(successMessage);
            }).catch(function(err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showCopySuccess(successMessage);
            });
        }

        function showCopySuccess(message) {
            // Create or get existing success notification
            let successDiv = document.querySelector('.copy-success');
            const defaultMessage = ' Enhanced Electrical Engineering Prompt copied to clipboard!<br><small>Includes interactive electron visualization & comprehensive electrical properties</small>';
            const displayMessage = message || defaultMessage;
            
            if (!successDiv) {
                successDiv = document.createElement('div');
                successDiv.className = 'copy-success';
                successDiv.innerHTML = ` ${displayMessage}`;
                document.body.appendChild(successDiv);
            } else {
                successDiv.innerHTML = ` ${displayMessage}`;
            }
            
            // Show notification
            successDiv.classList.add('show');
            
            // Hide after 4 seconds (longer due to more text)
            setTimeout(() => {
                successDiv.classList.remove('show');
            }, 4000);
        }

        function handleAIPromptClick(elementData) {
            const prompt = generateElementPrompt(elementData);
            copyToClipboard(prompt, 'Enhanced Electrical Engineering Prompt copied to clipboard!\n\nThis prompt includes comprehensive electrical engineering sections with detailed electron drawings and orbital visualizations.');
        }

        function handleAIPromptClickArabic(elementData) {
            const prompt = generateElementPromptArabic(elementData);
            copyToClipboard(prompt, 'Enhanced Electrical Engineering Prompt (Arabic) copied to clipboard!\n\nThis prompt includes comprehensive electrical engineering sections with detailed electron drawings and orbital visualizations - Report will be in Arabic with RTL layout.');
        }
    </script>
    
    <!-- Dynamic Translation System -->
    <script src="translator.js"></script>
</body>
</html>